"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{24360:(t,e,s)=>{s.r(e),s.d(e,{ScrolltoInit:()=>o});var i=s(57556);class o{_init(){this._initVars(),this._initLogic()}_initVars(){this._optionsDefault=i.Xt.merge([this.constructor.optionsDefault,i.Xt.options[this.componentName]]),this.options=i.Xt.merge([this._optionsDefault,this._optionsCustom])}_initLogic(){let t=this,e=t.options;t.ns=t.ns??i.Xt.uniqueId(),t.initial=!0,t._classes=e.class?e.class.split(" "):[];let s=i.Xt.dataStorage.put(t.container,`click/${t.ns}`,t._eventChange.bind(t,{}));t.container.addEventListener("click",s);let o=i.Xt.dataStorage.put(window,`scrollto/${t.ns}`,t._eventScrollto.bind(t,{}));for(let s of(addEventListener(`scrollto.trigger.${t._componentNs}`,o,!0),addEventListener("hashchange",i.Xt.dataStorage.put(window,`hashchange/${t.ns}`,t._eventChange.bind(t).bind(t,{hashchange:!0}))),t.scrollers=[document.scrollingElement,...document.querySelectorAll(e.scrollers)].reverse(),t.scrollers))if(s){let o=i.Xt.dataStorage.put(s,`scroll/${t.ns}`,t._eventActivationHandler.bind(t).bind(t,{scroller:s})),n=e.events?e.events.split(" "):[];if(s===document.scrollingElement)for(let t of n)addEventListener(t,o);else for(let t of n)s.addEventListener(t,o)}i.Xt.ready({state:"complete",func:()=>{t.container.dispatchEvent(new CustomEvent(`setup.${t._componentNs}`)),i.Xt.frameDouble({el:t.container,ns:`${t.ns}Init`,func:()=>{t._initStart(),t.container.setAttribute(`data-${t.componentName}-init`,""),t.container.dispatchEvent(new CustomEvent(`init.${t._componentNs}`)),t.initial=!1,e.debug&&console.debug(`${t.componentName} init`,t)}})}})}_initStart(){for(let t of(this._eventStart(),this.scrollers))t&&this._eventActivationHandler({scroller:t})}_eventStart(){let t=this.options,e=location.hash;if(e){let s=this.container.querySelector(t.anchors.replace("{hash}",e));s&&this._eventChange({el:s})}}_eventScrollto(){let{el:t,tr:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,i=this.options;if(this.hashchange=!!t&&this.hashchange,(t=t??s.target)&&t.nodeName&&t!==window&&(this.target=e??t,this.target)){for(let t of this.scrollers)if(t&&t.contains(this.target)){this.scroller=t;break}(i.hash||t.getAttribute("data-xt-scrollto-hash"))&&this.target.dispatchEvent(new CustomEvent("openauto.trigger.xt")),this._eventScrolltoLogic()}}_eventScrolltoLogic(){let t=this.options;if(i.Xt.visible({el:this.target})){this.hashchange=i.Xt.scrolltoHashforce??this.hashchange,i.Xt.scrolltoHashforce=null,this.position=t.position({self:this}),this.space=t.space({self:this}),this.duration=t.duration({self:this}),this.position=this.position-this.space;let e=this.scroller.scrollHeight-this.scroller.clientHeight;this.position=this.position<0?0:this.position,this.position=this.position>e?e:this.position,this.scroller.scrollTop===this.position&&this.scroller.dispatchEvent(new CustomEvent("scroll")),this.container.dispatchEvent(new CustomEvent(`scrollto.${this._componentNs}`))}}_eventChange(t,e){let{hashchange:s=!1,el:i}=t,o=this.options;if(this.hashchange=!1,s){this.hashchange=!0;let t=location.hash,e=this.container.querySelector(o.anchors.replace("{hash}",t));e&&(o.hash||e.getAttribute("data-xt-scrollto-hash"))&&(i=e)}if((i=i??e.target)&&i.nodeName&&i!==window&&(i=i.closest(o.anchors.replace("{hash}","#")))&&i.matches(o.anchors.replace("{hash}","#"))){let t=new URL(i.getAttribute("href"),location);if(t.hash&&t.pathname===location.pathname&&(!s||location.hash===i.hash)){let n=s?t.hash:i.hash.toString(),a=this.container.querySelector(n);if(a){for(let t of(e&&e.preventDefault(),this.scrollers))if(t&&t.contains(a)){this.scroller=t;break}for(let e of(!s&&(o.hash||"true"===i.getAttribute("data-xt-scrollto-hash"))&&"false"!==i.getAttribute("data-xt-scrollto-hash")&&location.hash!==i.hash&&history.pushState({},"",t.hash),Array.from(this.container.querySelectorAll(o.anchors.replace("{hash}","#")))))e.classList.remove(...this._classes);i.classList.add(...this._classes),this._eventScrollto({el:i,tr:a})}}}}_eventActivationHandler(){let{scroller:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,s=e.options;s.scrollActivation&&(clearTimeout(i.Xt.dataStorage.get(t,`${e.ns}ScrollTimeout`)),i.Xt.dataStorage.set(t,`${e.ns}ScrollTimeout`,setTimeout(()=>{e._eventActivation({scroller:t})},s.scrollDelay)))}_eventActivation(){let{scroller:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.options;this.target=!1,this.scroller=t;let s=!1,o=this.scroller.scrollTop,n=this.scroller.scrollHeight;o+this.scroller.clientHeight>=n&&(o=n);let a=Array.from(this.container.querySelectorAll(e.anchors.replace("{hash}","#")));for(let t of a){for(let e of this.scrollers)if(e){if(e===this.scroller)break;if(e.contains(t))return}let n=new URL(t.getAttribute("href"),location);if(n.hash){try{document.createDocumentFragment().querySelector(n.hash)}catch{continue}if((this.target=document.querySelector(n.hash),this.target&&i.Xt.visible({el:this.target}))&&o>=Math.floor(e.position({self:this})-e.space({self:this}))){let t=e.anchors.replace("{hash}",n.hash),i=a.filter(e=>e.matches(t));for(let t of(s=!!i.length,a.filter(t=>!i.includes(t))))t.classList.remove(...this._classes);for(let t of i)this._classes.length&&!t.classList.contains(...this._classes)&&t.classList.add(...this._classes)}}}if(!s&&this.target)for(let t of a)t.classList.remove(...this._classes)}enable(){this.disabled&&(this.disabled=!1,this.container.dispatchEvent(new CustomEvent(`status.${this._componentNs}`)))}disable(){let{skipEvent:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.disabled&&(this.disabled=!0,t||this.container.dispatchEvent(new CustomEvent(`status.${this._componentNs}`)))}reinit(){this._initLogic()}destroy(){let t=this.options,e=i.Xt.dataStorage.get(this.container,`click/${this.ns}`);this.container.removeEventListener("click",e);let s=i.Xt.dataStorage.get(window,`scrollto/${this.ns}`);for(let e of(removeEventListener(`scrollto.trigger.${this._componentNs}`,s,!0),removeEventListener("hashchange",i.Xt.dataStorage.get(window,`hashchange/${this.ns}`)),this.scrollers))if(e){let s=i.Xt.dataStorage.get(e,`scroll/${this.ns}`),o=t.events?t.events.split(" "):[];if(e===document.scrollingElement)for(let t of o)removeEventListener(t,s);else for(let t of o)e.removeEventListener(t,s)}this.container.removeAttribute(`data-${this.componentName}-init`),i.Xt._remove({name:this.componentName,el:this.container}),this.container.dispatchEvent(new CustomEvent(`destroy.${this._componentNs}`)),delete this}}}}]);