"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{51707:(t,e,i)=>{i.r(e),i.d(e,{SliderInit:()=>s});var r=i(88300);class s extends r.Xt.Toggle{_initScope(){let t=this.options;this.wheel.deltaY=!1,this.wheel.timeout,this.dragger=this.container.querySelector(t.drag.dragger),this._destroyElements.push(this.dragger),this.dragger.classList.add("initial"),this._destroyDrag(),this.drag._wrapDir=0,this.drag._wrapIndex=null;let e=this.dragger.getBoundingClientRect();this.drag.size=this.drag.width=e.width,this.drag.height=e.height,this.drag._left=e.left,0!==this.drag.size&&(this.disabled||t.drag.noMouse||this.dragger.classList.add("xt-grab"),t.autoHeight&&(this._autoHeight=this.container.querySelector(t.autoHeight)),t.keepHeight&&(this._keepHeight=this.container.querySelector(t.keepHeight)),this.drag._position=this.drag._final=this.drag._initial=0,this._destroyNooverflow(),this._destroyWrap(),this._destroyPagination(),this._initScopeTargets(),this._initGroups(),this._initPagination(),this._initScopeElements())}_initScopeElements(){super._initScopeElements();let t=this.options;this.elements=this.elements.filter(e=>!e.classList.contains(...t.elementsTemplate.split(" ")))}_initGroups(){let t=this.options,e=0,i=0;for(let e of this.targets)t.noobserver||(r.Xt.unobserve({container:e,id:this.ns}),this._resetPerfSize.bind(this,e)());for(let s of this.targets){let a,o,g,n;if("absolute"===t.mode)a=0,o=this.drag.width,g=this.drag.height,n=this.drag.height;else{let t=s.getBoundingClientRect();a=t.left-this.drag._left,o=t.width,g=t.height,n=(s.children.length?s.children[0]:s).offsetHeight}e+=o,i=o>i?o:i,r.Xt.dataStorage.set(s,`${this.ns}TrLeftInitial`,a),r.Xt.dataStorage.set(s,`${this.ns}TrLeft`,a),r.Xt.dataStorage.set(s,`${this.ns}TrWidth`,o),r.Xt.dataStorage.set(s,`${this.ns}TrHeight`,g),r.Xt.dataStorage.set(s,`${this.ns}TrHeightContent`,n)}for(let r of(this.drag.sizeContent=e,this._initGroupsInitial(),t.nooverflow&&(this.drag._availableSpace<=0?(this.dragger.classList.add(...t.nooverflow.split(" ")),this._disabledManual=!0,this._initGroupsInitial({group:1})):this._destroyNooverflow()),this._initGroupsPosition(),t.wrap&&"absolute"!==t.mode?this.drag._availableSpace>=i&&(this._wrap=!0):this._wrap=!1,this.drag._wrapFirst=0,this.drag._wrapLast=this._groups.length-1,this._initGroupsContain(),this._groups))r.targetsInitial=[...r.targets];this._initGroupsSame()}_initGroupsInitial(){let{group:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.options;this._groups=[];let i=0,s=(t=t??e.group)?this.drag.size*t:0,a=s;for(let[t,e]of(this.drag._availableSpace=-this.drag.size,this.targets.entries())){let o=r.Xt.dataStorage.get(e,`${this.ns}TrWidth`);a-=o,this.drag._availableSpace+=o,a>=0||0!==t&&(i++,a=s-o),this._groups[i]?this._groups[i].targets.push(e):this._groups[i]={target:e,targets:[e]},e.removeAttribute("data-xt-group"),e.setAttribute("data-xt-group",`${this.ns}-${i}`),e.removeAttribute("data-xt-group-same")}}_initGroupsPosition(){let t=this.options;for(let e of(this._usedWidth=0,this._groups)){let i,s=e.target,a=r.Xt.dataStorage.get(s,`${this.ns}TrLeft`),o=this.getTargets({el:s}),g=1/0,n=0;for(let e of o)g=r.Xt.dataStorage.get(e,`${this.ns}TrLeft`)<g?a:g,"absolute"===t.mode&&(g+=this._usedWidth),n+=r.Xt.dataStorage.get(e,`${this.ns}TrWidth`),this._usedWidth+=n;for(let e of("center"===t.align?i=this.drag.size/2-g-n/2:"left"===t.align?i=-g:"right"===t.align&&(i=this.drag.size-g-n),o))r.Xt.dataStorage.set(e,`${this.ns}GroupLeft`,i),r.Xt.dataStorage.set(e,`${this.ns}GroupWidth`,n)}}_initGroupsContain(){let t=this.options;if(t.contain&&"absolute"!==t.mode&&!this._wrap&&this._usedWidth>this.drag.size){let t=this._groups[this.drag._wrapFirst].target,e=this._groups[this.drag._wrapLast].target,i=r.Xt.dataStorage.get(t,`${this.ns}TrLeft`),s=r.Xt.dataStorage.get(e,`${this.ns}TrLeft`),a=r.Xt.dataStorage.get(e,`${this.ns}GroupWidth`),o=-i,g=-s-a+this.drag.size,n=0;for(let t=0;t<this._groups.length-n;t++){let e=this._groups[t];for(let i of e.targets){let s=r.Xt.dataStorage.get(i,`${this.ns}GroupLeft`);if(s>=o){s=o;let i=r.Xt.dataStorage.get(this._groups[0].target,`${this.ns}GroupWidth`);if(i+=r.Xt.dataStorage.get(e.target,`${this.ns}GroupWidth`),t>0){let t=this._groups[0].target.getAttribute("data-xt-group");for(let i of e.targets)this._groups[0].targets.push(i),i.setAttribute("data-xt-group",t)}for(let t of this._groups[0].targets)r.Xt.dataStorage.set(t,`${this.ns}GroupLeft`,s),r.Xt.dataStorage.set(t,`${this.ns}GroupWidth`,i);t>0&&(this._groups.splice(t,1),n++,t--)}else{t=this._groups.length;break}}}for(let t=this._groups.length-1;t>=0;t--){let e=this._groups[t];for(let i of e.targets){let s=r.Xt.dataStorage.get(i,`${this.ns}GroupLeft`);if(s<=g){s=g;let i=this._groups.length-1,a=r.Xt.dataStorage.get(this._groups[i].target,`${this.ns}GroupWidth`);if(a+=r.Xt.dataStorage.get(e.target,`${this.ns}GroupWidth`),t<i){let t=this._groups[i].target.getAttribute("data-xt-group");for(let r of e.targets)this._groups[i].targets.unshift(r),r.setAttribute("data-xt-group",t)}for(let t of this._groups[i].targets)r.Xt.dataStorage.set(t,`${this.ns}GroupLeft`,s),r.Xt.dataStorage.set(t,`${this.ns}GroupWidth`,a);t<i&&this._groups.splice(t,1)}else{t=0;break}}}for(let t of this._groups){let e=0,i=r.Xt.dataStorage.get(t.target,`${this.ns}GroupLeft`);for(let i of t.targets)e+=r.Xt.dataStorage.get(i,`${this.ns}TrWidth`);for(let s of t.targets)r.Xt.dataStorage.set(s,`${this.ns}GroupLeft`,i),r.Xt.dataStorage.set(s,`${this.ns}GroupWidth`,e)}this.drag._wrapFirst=0,this.drag._wrapLast=this._groups.length-1}}_initGroupsSame(){let t=this.options;if(t.groupSame&&"absolute"!==t.mode)for(let[e,i]of this._groups.entries()){let s=i.target,a=s.getAttribute("data-xt-group"),o=r.Xt.dataStorage.get(s,`${this.ns}GroupWidth`),g=r.Xt.dataStorage.get(s,`${this.ns}GroupLeft`),n=r.Xt.dataStorage.get(s,`${this.ns}TrLeft`)+g,h=this.drag.size-n-o,d=0;for(let i=0;i<=this._groups.length-1;i++){let s=e+1+i;if((s=this._wrap&&s>this._groups.length-1?s-this._groups.length:s)>this._groups.length-1)break;let o=this._groups[e];for(let e=0;e<this._groups[s].targetsInitial.length;e++){let g=this._groups[s].targetsInitial[e];if((d+=r.Xt.dataStorage.get(g,`${this.ns}TrWidth`))<=h){o.targets.push(g);let e=a+t.groupSeparator+g.getAttribute("data-xt-group")+t.groupSeparator+(g.getAttribute("data-xt-group-same")??"");g.setAttribute("data-xt-group-same",e)}else{i=this._groups.length-1;break}}}d=0;for(let i=0;i<=this._groups.length-1;i++){let s=e-1-i;if((s=this._wrap&&s<0?s+this._groups.length:s)<0)break;let o=this._groups[e];for(let e=this._groups[s].targetsInitial.length-1;e>=0;e--){let g=this._groups[s].targetsInitial[e];if((d+=r.Xt.dataStorage.get(g,`${this.ns}TrWidth`))<=n){o.targets.unshift(g);let e=g.getAttribute("data-xt-group")+t.groupSeparator+a+t.groupSeparator+(g.getAttribute("data-xt-group-same")??"");g.setAttribute("data-xt-group-same",e)}else{i=this._groups.length-1;break}}}}}_initPagination(){let t=this.options;if(!this.targets.length)return!1;let e=this.container.querySelectorAll(t.pagination);e.length||console.error("Error: Xt.Slider pagination not found for",this.container),this.pags=this.pags?this.pags:[];let i=`${t.elements}.${t.elementsTemplate.split(" ").join(".")}`,s=`${t.elements}:not(.${t.elementsTemplate.split(" ").join(".")})`;for(let[a,o]of e.entries()){let e=o.querySelector(i);e||console.error(`Error: Xt.Slider ${i} not found inside`,o);let g=e.parentNode;for(let[i,o]of(this.pags[a]=[],this._groups.entries())){let n=document.createElement("div"),h=e.cloneNode(!0);h.classList.remove(...t.elementsTemplate.split(" ")),n.append(h);let d=n.innerHTML,l=["xt-clone"],_=/xt-content/gi;if(-1!==d.search(_)){let t="";for(let e of o.targets){let i=e.querySelector("[data-xt-slider-content]");i&&(t+=i.innerHTML);let r=e.querySelector("[data-xt-slider-element-classes]");r&&l.push(r.getAttribute("data-xt-slider-element-classes"))}d=d.replace(_,t)}_=/xt-num/gi,-1!==d.search(_)&&(d=d.replace(_,(i+1).toString())),_=/xt-tot/gi,-1!==d.search(_)&&(d=d.replace(_,this._groups.length.toString())),n.innerHTML=r.Xt.sanitize(d),l.length&&n.children[0].classList.add(...l),n.children[0].setAttribute("data-xt-group",o.target.getAttribute("data-xt-group")),g.insertBefore(n.children[0],e),n.remove(),this.pags[a][i]=g.querySelectorAll(s)[i],this._groups[i].element=this.pags[0][i]}}}_initEvents(){super._initEvents();let t=this.options,e=r.Xt.dataStorage.put(this.container,`init/${this.ns}`,this._eventInitHandler.bind(this));this.container.addEventListener("init.xt.slider",e);let i=r.Xt.dataStorage.put(window,`mousedown touchstart/drag/${this.ns}`,this._eventDragstartHandler.bind(this));for(let e of t.drag.noMouse?["touchstart"]:["mousedown","touchstart"])addEventListener(e,i,{passive:!1});let s=r.Xt.dataStorage.put(this.dragger,`dragstart/drag/${this.ns}`,this._eventDragstartFix);this.dragger.addEventListener("dragstart",s),addEventListener("resize.xt",r.Xt.dataStorage.put(window,`resize.xt/${this.ns}`,r.Xt._eventReinit.bind(null,{self:this})))}_initStart(){let{save:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;0!==e.drag.size&&(e._initPerfSize(),r.Xt.frame({el:e.container,ns:`${e.ns}InitDrag`,func:()=>{e.drag._instant=!0,e.drag._dragging=!1,e.dragger.dispatchEvent(new CustomEvent(`dragposition.${e._componentNs}`)),e._logicDragposition()}}),super._initStart({save:t}))}_initPerfSize(){let t=this,e=t.options;"relative"!==e.mode||e.noobserver||r.Xt.perf({func:()=>{for(let e of t.targets){let i=t._funcPerfSize.bind(t,e);r.Xt.observe({container:e,func:i,id:t.ns})}}})}_setPerfSize(t){let e=r.Xt.dataStorage.get(t,`${this.ns}TrWidth`),i=r.Xt.dataStorage.get(t,`${this.ns}TrHeight`);if(t.style.width=`${e}px`,t.style.height=`${i}px`,r.Xt._supports_content_visibility)t.style.contentVisibility="hidden";else for(let e of t.children)e.style.display="none"}_resetPerfSize(t){if(t.style.height="",t.style.width="",r.Xt._supports_content_visibility)t.style.contentVisibility="";else for(let e of t.children)e.style.display=""}_funcPerfSize(t,e){e?this._resetPerfSize.bind(this,t)():this._setPerfSize.bind(this,t)()}_eventInitHandler(){this.dragger.classList.remove("initial")}_eventDragstartFix(t){t.preventDefault()}_eventDragstartHandler(t){let e=this.options;if(this.dragger.contains(t.target)&&(!t.button||2!==t.button)){if(e.eventLimit){let i=this._containerTargets.querySelectorAll(e.eventLimit);r.Xt.contains({els:i,tr:t.target})||this._eventDragstart(t)}else this._eventDragstart(t);let i=r.Xt.dataStorage.put(window,`mouseup touchend/drag/${this.ns}`,this._eventDragendHandler.bind(this));for(let t of["mouseup","touchend"])addEventListener(t,i)}}_eventDragendHandler(t){let e=this.options;if(e.eventLimit){let i=this._containerTargets.querySelectorAll(e.eventLimit);r.Xt.contains({els:i,tr:t.target})||this._eventDragend(t)}else this._eventDragend(t)}_eventDragstart(t){let e=r.Xt.dataStorage.put(window,`mousemove touchmove/drag/${this.ns}`,this._eventDragHandler.bind(this));for(let t of["mousemove","touchmove"])addEventListener(t,e,{passive:!1});this._logicDragstart(t)}_eventDragHandler(t){this._logicDragmove(t)}_eventDragend(t){let e=r.Xt.dataStorage.get(window,`mouseup touchend/drag/${this.ns}`);for(let t of["mouseup","touchend"])removeEventListener(t,e);let i=r.Xt.dataStorage.get(window,`mousemove touchmove/drag/${this.ns}`);for(let t of["mousemove","touchmove"])removeEventListener(t,i);this._logicDragend(t)}_eventOn(t,e){let i,{el:s,force:a=!1}=t,o=this,g=o.options;if(o.disabled)return;for(let t of o._groups)(t.element===s||t.targetsInitial.includes(s))&&(i=t);if(!i)return;let n=i;s=i.element;let h=i.target,d=o.drag._instant;super._eventOn({el:s,force:a},e);let l=o._groups[o.drag._wrapFirst].target,_=o._groups[o.drag._wrapLast].target,p=r.Xt.dataStorage.get(l,`${o.ns}GroupLeft`),u=r.Xt.dataStorage.get(_,`${o.ns}GroupLeft`),f="absolute"!==g.mode?u:r.Xt.dataStorage.get(l,`${o.ns}GroupWidth`);if(o.drag._initial=r.Xt.dataStorage.get(h,`${o.ns}GroupLeft`),"absolute"===g.mode&&!o.initial&&o.direction){let t=Math.abs(o.drag._initial-o.drag._position)>f;if(g.loop&&h===_&&t&&o.direction<0){let t=u-p+o.drag._position-f;o.drag._final=t,o.drag._instant=!0,o.drag._dragging=!1,o.dragger.dispatchEvent(new CustomEvent(`dragposition.${o._componentNs}`)),o._logicDragposition()}else if(g.loop&&h===l&&t&&o.direction>0){let t=p-u+o.drag._position+f;o.drag._final=t,o.drag._instant=!0,o.drag._dragging=!1,o.dragger.dispatchEvent(new CustomEvent(`dragposition.${o._componentNs}`)),o._logicDragposition()}else if(t){let t=o.drag._final-o.drag._position-f*o.direction;o.drag._final=o.drag._initial-t,o.drag._instant=!0,o.drag._dragging=!1,o.dragger.dispatchEvent(new CustomEvent(`dragposition.${o._componentNs}`)),o._logicDragposition()}}if(o.drag._final=o.drag._initial,o.drag._direction=null,o.drag._ratioInverse=Math.abs(o.drag._final-o.drag._position)/Math.abs(f-p),o.drag._ratio=1-o.drag._ratioInverse,o.drag._instant=!1,o.drag._dragging=!1,o.dragger.dispatchEvent(new CustomEvent(`dragposition.${o._componentNs}`)),o._logicDragposition(),o.drag._instant=d,r.Xt.frame({el:o.container,ns:`${o.ns}isInstant`,func:()=>{o.drag._instant=!1}}),o._eventWrap({index:o.index}),o._autoHeight||o._keepHeight&&o.initial){let t=0;for(let e of n.targets){let i=r.Xt.dataStorage.get(e,`${o.ns}TrHeightContent`);t=i>t?i:t}t>0&&(t+="px",o._autoHeight.style.height!==t&&(o._autoHeight.style.height=t,h.dispatchEvent(new CustomEvent(`autoheight.${o._componentNs}`))),o._keepHeight&&o.initial&&(o._keepHeight.style.height=t))}}_setDirection(){if(null===this.index||this.index===this._oldIndex)this.direction=0;else if(null!==this._inverse)this.direction=this._inverse?-1:1;else{let t=r.Xt.dataStorage.get(this._groups[this.index].target,`${this.ns}GroupLeft`),e=r.Xt.dataStorage.get(this._groups[this._oldIndex].target,`${this.ns}GroupLeft`);this.direction=t>e?-1:1}this._inverse=this.direction<0}_eventWrap(){let{index:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._wrap){let e=this._groups[t].target,i=r.Xt.dataStorage.get(e,`${this.ns}GroupLeft`),s=r.Xt.dataStorage.get(e,`${this.ns}GroupWidth`),a=this.direction;a||(a=this.drag._final>-this.drag.size?-1:1),(this.drag._wrapDir!==a||this.drag._wrapIndex!==t)&&(this.drag._wrapDir=a,this.drag._wrapIndex=t,this._eventMove({index:t,direction:a,wrapLeft:i,previousWidth:s,wrapSpace:s}))}}_eventMove(){let t,{index:e,direction:i,wrapLeft:s,previousWidth:a,wrapSpace:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=this.options,n=this._groups.length;if(i<0?(e=this.getPrevIndex({index:e}),this.drag._wrapFirst=e,this.drag._wrapFirst=this.drag._wrapFirst<n?this.drag._wrapFirst:this.drag._wrapFirst-n,this.drag._wrapFirst=this.drag._wrapFirst>=0?this.drag._wrapFirst:n+this.drag._wrapFirst,this.drag._wrapLast=this.drag._wrapFirst-1,this.drag._wrapLast=this.drag._wrapLast<n?this.drag._wrapLast:this.drag._wrapLast-n,this.drag._wrapLast=this.drag._wrapLast>=0?this.drag._wrapLast:n+this.drag._wrapLast):i>0&&(e=this.getNextIndex({index:e}),this.drag._wrapLast=e,this.drag._wrapLast=this.drag._wrapLast<n?this.drag._wrapLast:this.drag._wrapLast-n,this.drag._wrapLast=this.drag._wrapLast>=0?this.drag._wrapLast:n+this.drag._wrapLast,this.drag._wrapFirst=this.drag._wrapLast+1,this.drag._wrapFirst=this.drag._wrapFirst<n?this.drag._wrapFirst:this.drag._wrapFirst-n,this.drag._wrapFirst=this.drag._wrapFirst>=0?this.drag._wrapFirst:n+this.drag._wrapFirst),null===e)return;let h=s,d=this._groups[e].targetsInitial,l=d[0],_=r.Xt.dataStorage.get(l,`${this.ns}TrLeftInitial`),p=r.Xt.dataStorage.get(l,`${this.ns}GroupWidth`);for(let t of(i<0?"center"===g.align?h+=a/2+p/2:"left"===g.align?h+=p:"right"===g.align&&(h+=a):i>0&&("center"===g.align?h-=a/2+p/2:"left"===g.align?h-=a:"right"===g.align&&(h-=p)),d))r.Xt.dataStorage.set(t,`${this.ns}GroupLeft`,h);for(let e of(i<0?t=s+_+p:i>0&&(t=s+_-a),"center"===g.align?t-=this.drag.size/2-a/2:"left"===g.align?t-=0:"right"===g.align&&(t-=this.drag.size-a),d)){let i=r.Xt.dataStorage.get(e,`${this.ns}TrLeftInitial`);r.Xt.dataStorage.set(e,`${this.ns}TrLeft`,i-t),e.style.transform=`translateX(${-t}px)`}i<0?"center"===g.align?o+=p+a/2:"left"===g.align?o+=p+this.drag.size-a:"right"===g.align&&(o+=p):i>0&&("center"===g.align?o+=p+a/2:"left"===g.align?o+=p:"right"===g.align&&(o+=p+this.drag.size-a)),o<=this.drag.size&&this._eventMove({index:e,direction:i,wrapLeft:h,previousWidth:p,wrapSpace:o})}dragstart(t){this._logicDragstart(t)}_logicDragstart(t){this.disabled||(void 0!==t.clientX?(this.drag._start=t.clientX,this.drag._startOther=t.clientY):t.touches&&t.touches.length&&(this.drag._start=t.touches[0].clientX,this.drag._startOther=t.touches[0].clientY),this._eventAutostop(),this._autoblock=!0,this.drag._lock=!1,this.drag._prevent=!1,this.drag._index=this.index,this.drag._old=this.drag._start,this.drag._overflow=null,this.dragger.dispatchEvent(new CustomEvent(`dragstart.${this._componentNs}`)))}dragmove(t){let{keepActivated:e,setup:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._logicDragmove(t,{keepActivated:e,setup:i})}_logicDragmove(t){let{keepActivated:e=!1,setup:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.options;if(this.disabled||(void 0!==t.clientX?(this.drag._current=t.clientX,this.drag._currentOther=t.clientY):t.touches&&t.touches.length&&(this.drag._current=t.touches[0].clientX,this.drag._currentOther=t.touches[0].clientY),this.drag._distance=this.drag._start-this.drag._current,this.drag._distanceOther=this.drag._startOther-this.drag._currentOther,this.drag._lock||this.drag._prevent||(Math.abs(this.drag._distanceOther)>s.drag.threshold?this.drag._prevent=!0:Math.abs(this.drag._distance)>s.drag.threshold&&(this.drag._lock=!0)),this.drag._start===this.drag._current)||(i&&(this.drag._current=Math.sign(this.drag._current)),this.drag._prevent))return;if(this.drag._lock&&(t.cancelable&&t.preventDefault(),!e))for(let t of this.targets)t.classList.add("pointer-events-none");let a=this._groups[this.drag._wrapFirst].target,o=this._groups[this.drag._wrapLast].target,g=r.Xt.dataStorage.get(a,`${this.ns}GroupLeft`),n=r.Xt.dataStorage.get(o,`${this.ns}GroupLeft`),h="absolute"!==s.mode?n:r.Xt.dataStorage.get(a,`${this.ns}GroupWidth`),d=this.drag._position+(this.drag._current-this.drag._old)*s.drag.factor;if(this.drag._direction=this.drag._current>this.drag._old?-1:1,this.drag._old=this.drag._current,!this._wrap&&"absolute"!==s.mode){let t=Math.sign(this.drag._distance),e=s.drag.overflow?s.drag.overflow:()=>0;if(d>g&&t<0){this.drag._overflow=this.drag._overflow?this.drag._overflow:this.drag._current;let t=this.drag._current-this.drag._overflow;d=t>=0?g+e({overflow:t}):d}else if(d<n&&t>0){this.drag._overflow=this.drag._overflow?this.drag._overflow:this.drag._current;let t=this.drag._current-this.drag._overflow;d=t<=0?n-e({overflow:-t}):d}}if(this.drag._final=d,this.direction=Math.sign(this.drag._initial-this.drag._final),this._inverse=this.direction<0,this.drag._ratio=Math.abs(this.drag._final-this.drag._initial)/Math.abs(h-g),this.drag._ratio=this.drag._ratio>1?1:this.drag._ratio,this.drag._ratio=this.drag._ratio<-1?-1:this.drag._ratio,this.drag._ratioInverse=1-this.drag._ratio,"absolute"===s.mode&&(this.direction>0&&this.drag._final>this.drag._initial||this.direction<0&&this.drag._final<this.drag._initial)&&(this.drag._ratio=0,this.drag._ratioInverse=0),this.drag._instant=!0,this.direction!==this.directionOld?this.drag._dragging=!1:this.drag._dragging=!0,this.dragger.dispatchEvent(new CustomEvent(`dragposition.${this._componentNs}`)),this._logicDragposition(),this.dragger.dispatchEvent(new CustomEvent(`drag.${this._componentNs}`)),this._inverse=null,this.directionOld=this.direction,this.drag._lock&&"absolute"!==s.mode){let t=this._logicDragfind({index:this.index});null!==t&&t!==this.index&&(super._eventOn({el:this._groups[t].element,force:!0}),this._eventWrap({index:t}))}}dragend(t){this._logicDragend(t)}_logicDragend(t){let e=this,i=e.options;if(!e.disabled){for(let i of(void 0!==t.clientX?(e.drag._current=t.clientX,e.drag._currentOther=t.clientY):t.touches&&t.touches.length&&(e.drag._current=t.touches[0].clientX,e.drag._currentOther=t.touches[0].clientY),e._autoblock=!1,e.targets))i.classList.remove("pointer-events-none");if(e.drag._start===e.drag._current)return void e.dragger.dispatchEvent(new CustomEvent(`dragend.${e._componentNs}`));requestAnimationFrame(()=>{if(e.drag._lock){let t=e.index;if(t!==e.drag._index)(!i.free||e.drag._overflow)&&e.goToNum({index:t});else{let r=Math.sign(e.drag._distance);r>0&&e.drag._direction>0&&(i.loop||e._wrap||t!==e.getElementsGroups().length-1)?i.free&&t!==e.getElementsGroups().length-1||e.goToNext({amount:1}):r<0&&e.drag._direction<0&&(i.loop||e._wrap||0!==t)?i.free&&0!==t||e.goToPrev({amount:1}):e._wrap||e._logicDragreset()}}else i.free||e._logicDragreset();e._eventAutostart(),e.dragger.dispatchEvent(new CustomEvent(`dragend.${e._componentNs}`))})}}_logicDragreset(){let t=this.options;this.direction=-Math.sign(this.drag._initial-this.drag._final),this._inverse=this.direction<0;let e=this._groups[this.drag._wrapFirst].target,i=this._groups[this.drag._wrapLast].target,s=r.Xt.dataStorage.get(e,`${this.ns}GroupLeft`),a=r.Xt.dataStorage.get(i,`${this.ns}GroupLeft`),o="absolute"!==t.mode?a:r.Xt.dataStorage.get(e,`${this.ns}GroupWidth`);this.drag._ratio=1-Math.abs(this.drag._final-this.drag._initial)/Math.abs(o-s),this.drag._ratioInverse=1-this.drag._ratio,this.drag._final=this.drag._initial,this.drag._direction=null,this.drag._instant=!1,this.drag._dragging=!1,this.dragger.dispatchEvent(new CustomEvent(`dragposition.${this._componentNs}`)),this._logicDragposition(),this.dragger.dispatchEvent(new CustomEvent(`dragreset.${this._componentNs}`)),this._inverse=null,this._eventAutostart()}_logicDragfind(){let{index:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.drag._direction;if(e<0){let e=this._groups[this.drag._wrapFirst].target,i=r.Xt.dataStorage.get(e,`${this.ns}GroupLeft`);if(this.drag._final>=i)return this.drag._wrapFirst;for(let e=t;e>=0;e--){let i=this._groups[e].target,s=r.Xt.dataStorage.get(i,`${this.ns}GroupLeft`),a=r.Xt.dataStorage.get(i,`${this.ns}GroupWidth`);if(this.drag._final<s+a/2)return e;if(0===e&&(e=this._groups.length),e===t+1)break}}else if(e>0){let e=this._groups[this.drag._wrapLast].target,i=r.Xt.dataStorage.get(e,`${this.ns}GroupLeft`);if(this.drag._final<=i)return this.drag._wrapLast;for(let e=t;e<this._groups.length;e++){let i=this._groups[e].target,s=r.Xt.dataStorage.get(i,`${this.ns}GroupLeft`),a=r.Xt.dataStorage.get(i,`${this.ns}GroupWidth`);if(this.drag._final>s-a/2)return e;if(e===this._groups.length-1&&(e=-1),e===t-1)break}}return null}_logicDragposition(){let t=this.options;t.dragposition||"absolute"===t.mode||(this.drag._instant?this.dragger.classList.remove("on"):this.dragger.classList.add("on"),this.drag._position=this.drag._final,this.dragger.style.transform=`translateX(${this.drag._final}px)`)}wheelEvent(){let{factor:t=-1,timeout:e=250,threshold:i=10}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,s=this,a=s.options,o=r.deltaY*t;return Math.abs(o)<i?s.wheel.deltaY&&(clearTimeout(s.wheel.timeout),s._wheelStop({clientX:o})):(s.wheel.deltaY?o=s.wheel.deltaY+o:(s._wheelStart(),s._wheelMove({clientX:o,setup:!0})),s._wheelMove({clientX:o}),clearTimeout(s.wheel.timeout),s.wheel.timeout=setTimeout(()=>{s._wheelStop({clientX:o})},e)),(!s.drag._direction||s.drag._direction>0)&&(!!a.loop||!!s._wrap||s.index!==s.getElementsGroups().length-1)||(!s.drag._direction||!!(s.drag._direction<0))&&(!!a.loop||!!s._wrap||0!==s.index)}_wheelStart(){this.wheel._wheeling=!1,this.wheel.deltaY=!1,this.dragstart({clientX:0})}_wheelMove(t){let{clientX:e,setup:i}=t;i||(this.wheel._wheeling=!0),this.wheel.deltaY=e,this.dragmove({clientX:e},{keepActivated:!0,setup:i})}_wheelStop(t){let{clientX:e}=t;this.wheel._wheeling=!1,this.wheel.deltaY=!1,this.dragend({clientX:e})}enable(){let t=this.options;if(this.disabled&&(t.drag.noMouse||this.dragger.classList.add("xt-grab"),t.hideDisable))for(let e of this.container.querySelectorAll(t.hideDisable))e.classList.remove("hidden");super.enable()}disable(){let{skipEvent:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.options;if(!this.disabled&&(this._destroyGrab(),this._destroyIntraction(),e.hideDisable))for(let t of this.container.querySelectorAll(e.hideDisable))t.classList.add("hidden");super.disable({skipEvent:t})}destroy(){let{weak:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._destroyGrab(),this._destroyIntraction(),this._destroyNooverflow(),this._destroyDrag(),this._destroyAutoheight(),this._destroyPagination(),this._destroyWrap(),this._destroyPerfSize(),super.destroy({weak:t})}_destroyGrab(){this.dragger&&this.dragger.classList.remove("xt-grab")}_destroyIntraction(){for(let t of this.targets)t.classList.remove("pointer-events-none")}_destroyDrag(){this.dragger.style.transform&&(this.dragger.style.transform="")}_destroyNooverflow(){let t=this.options;t.nooverflow&&(this.dragger.classList.remove(...t.nooverflow.split(" ")),this._disabledManual=!1)}_destroyAutoheight(){(this._autoHeight||this._keepHeight)&&(this._autoHeight.style.height="")}_destroyPagination(){if(this.pags&&this.pags.length){for(let t of this.pags)for(let e of t)e.remove();this.pags=[]}}_destroyWrap(){for(let t of this.targets)t.style.transform=""}_destroyPerfSize(){let t=this.options;if("relative"===t.mode&&!t.noobserver)for(let t of this.targets)r.Xt.hasobserve({container:t,id:this.ns})&&r.Xt.unobserve({container:t,id:this.ns})}}}}]);