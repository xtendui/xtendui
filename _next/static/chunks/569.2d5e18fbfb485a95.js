"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{16569:function(e,t,s){s.r(t),s.d(t,{ToggleInit:function(){return a}});var n=s(77302),i=s(87386);/*!
 * Xtend UI (https://xtendui.com/)
 * @copyright (c) 2017-2024 Riccardo Caroli
 * @license MIT (https://github.com/xtendui/xtendui/blob/master/LICENSE.txt)
 */n.Xt.focusTrap=i;class a{_init(){this._initVars(),this._initLogic()}_initVars(){this._optionsDefault=n.Xt.merge([this.constructor.optionsDefaultSuper,this.constructor.optionsDefault]),this._optionsDefault=n.Xt.merge([this._optionsDefault,n.Xt.options[this.componentName]]),this._optionsInitial=this.options=n.Xt.merge([this._optionsDefault,this._optionsCustom]);let e=this.options;this._classes=e.class?e.class.split(" "):[],this._classesIn=e.classIn?e.classIn.split(" "):[],this._classesOut=e.classOut?e.classOut.split(" "):[],this._classesDone=e.classDone?e.classDone.split(" "):[],this._classesInitial=e.classInitial?e.classInitial.split(" "):[],this._classesBefore=e.classBefore?e.classBefore.split(" "):[],this._classesAfter=e.classAfter?e.classAfter.split(" "):[]}_initLogic(){let{save:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._destroyElements=[document,window,this.container],this.enable(),this._initSetup(),n.Xt._initMatches({self:this,optionsInitial:this._optionsInitial}),this._initScope(),this._initEvents(),this._initA11y(),this._initStart({save:e}),(this.options.disabled||this._disabledManual)&&this.disable()}_initSetup(){let e=this.options;this._containerTargets=this.container,e.targets&&-1!==e.targets.indexOf("#")?(this._mode="unique",this._containerTargets=document.documentElement,this.ns=`${this.componentName}-${e.targets.toString()}-${this._classes.toString()}`):(this._mode="multiple",this.ns=this.ns??n.Xt.uniqueId()),this.ns=this.ns.replace(/^[^a-z]+|[ ,#_:.-]+/gi,""),this._addNamespace(),this._setCurrents([])}_initScope(){this._initScopeElements(),this._initScopeTargets()}_initScopeElements(){let e=this.options;if(this._containerElements=this.container,e.elements){-1!==e.elements.indexOf("#")&&(this._containerElements=document.documentElement);let t=Array.from(this._containerElements.querySelectorAll(e.elements));e.exclude&&(t=t.filter(t=>!t.matches(e.exclude))),this.elements=t,this._destroyElements.push(...this.elements)}if(this.elements.length||(this.elements=[this.container]),e.elementsInner)for(let t of this.elements){let s=n.Xt.queryAll({els:t,query:e.elementsInner});n.Xt.dataStorage.set(t,`elementsInner/${this.ns}`,s)}}_initScopeTargets(){let e=this.options;if(e.targets){let t=Array.from(this._containerTargets.querySelectorAll(e.targets));if(e.exclude&&(t=t.filter(t=>!t.matches(e.exclude))),this.targets=t,this._destroyElements.push(...this.targets),e.targetsInner)for(let t of this.targets){let s=n.Xt.queryAll({els:t,query:e.targetsInner});n.Xt.dataStorage.set(t,`targetsInner/${this.ns}`,s)}}}_initStart(){let{save:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,s=t.options;t._setCurrents([]);let i=0;t.initial=!0,t.index=null,t._oldIndex=null,n.Xt._running[t.ns]=[],i=t._initActivate({save:e});let a=s.min-i;if(a>0){i+=a;for(let e=0;e<a;e++){let n=t.elements[e];if(!n||n.classList.contains(t._classes)||n.checked)a<t.elements.length&&a++;else if(s.on){let e=s.on.split(" ")[0];t._getEventParent({el:n,event:e}).dispatchEvent(new CustomEvent(e,{detail:{force:!0}}))}else t._eventOn({el:n,force:!0})}}e&&(t._initialCurrents=t._getCurrents().slice(0)),0===i&&(t.container.dispatchEvent(new CustomEvent(`setup.${t._componentNs}`)),n.Xt.frameDouble({el:t.container,ns:`${t.ns}Init`,func:()=>{t.container.setAttribute(`data-${t.componentName}-init`,""),t.container.dispatchEvent(new CustomEvent(`init.${t._componentNs}`)),t._eventAutostart(),t.initial=!1,s.debug&&console.debug(`${t.componentName} init`,t)}}))}_initActivate(){let{save:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,s=t.options,i=e=>{for(let s of t._classes)if(e.classList.contains(s)||e.checked)return!0;return!1},a=t._hashChange({save:e}),o=a.currents??0;for(let l of t.getElementsGroups()){let r=!1;if(e?!0===s.classSkip||s.classSkip.elements||(r=i(l)):t._initialCurrents.includes(l)&&(r=!0),r&&o<s.max||a.arr.includes(l))l.classList.add(...t._classes),l.classList.add(...t._classesIn),l.classList.add(...t._classesInitial);else{if(!0!==s.classSkip&&!s.classSkip.elements)for(let e of t.getElements({el:l}))e.classList.remove(...t._classes,...t._classesIn,...t._classesOut,...t._classesDone,...t._classesInitial,...t._classesBefore,...t._classesAfter);if(s.elementsInner&&!0!==s.classSkip&&!s.classSkip.elementsInner)for(let e of n.Xt.dataStorage.get(l,`elementsInner/${t.ns}`))e.classList.remove(...t._classes,...t._classesIn,...t._classesOut,...t._classesDone,...t._classesInitial,...t._classesBefore,...t._classesAfter)}for(let d of t.getTargets({el:l})){!e||r||!0===s.classSkip||s.classSkip.targets||(r=i(d));let l=t.getElements({el:d,same:!0});if(r&&o<s.max||a.arr.some(e=>l.includes(e)))d.classList.add(...t._classes),d.classList.add(...t._classesIn),d.classList.add(...t._classesInitial);else if(!0===s.classSkip||s.classSkip.targets||d.classList.remove(...t._classes,...t._classesIn,...t._classesOut,...t._classesDone,...t._classesInitial,...t._classesBefore,...t._classesAfter),s.targetsInner&&!0!==s.classSkip&&!s.classSkip.targetsInner)for(let e of n.Xt.dataStorage.get(d,`targetsInner/${t.ns}`))e.classList.remove(...t._classes,...t._classesIn,...t._classesOut,...t._classesDone,...t._classesInitial,...t._classesBefore,...t._classesAfter)}if(r&&o<s.max){if(o++,a.arr.push(l),s.on){let e=s.on.split(" ")[0];t._getEventParent({el:l,event:e}).dispatchEvent(new CustomEvent(e,{detail:{force:!0}}))}else t._eventOn({el:l,force:!0})}}return o}_initEvents(){let e=this,t=e.options;for(let s of(e._removeEvents(),e.elements)){let i=n.Xt.dataStorage.put(s,`${t.on}/oncustom/${e.ns}`,e._eventOnHandler.bind(e,{el:s,force:!0}));if(s.addEventListener(`on.trigger.${e._componentNs}`,i),t.on)for(let i of t.on.split(" ")){let a=e._getEventParent({el:s,event:i});a!==s&&e._destroyElements.push(a);let o=n.Xt.dataStorage.put(a,`${t.on}/on/${e.ns}`,e._eventOnHandler.bind(e,{el:s}));a.addEventListener(i,o)}let a=n.Xt.dataStorage.put(s,`${t.off}/offcustom/${e.ns}`,e._eventOffHandler.bind(e,{el:s,force:!0}));if(s.addEventListener(`off.trigger.${e._componentNs}`,a),t.off){for(let i of t.off.split(" "))if(!t.on.split(" ").includes(i)){let a=e._getEventParent({el:s,event:i});a!==s&&e._destroyElements.push(a);let o=n.Xt.dataStorage.put(a,`${t.off}/off/${e.ns}`,e._eventOffHandler.bind(e,{el:s}));a.addEventListener(i,o)}}if(t.on){if(t.preventEvent){let i=t.on.split(" ");if(i.includes("click")||i.includes("mouseenter")||i.includes("mousehover")){let t=n.Xt.dataStorage.put(s,`touchend/preventevent/${e.ns}`,e._eventPreventeventStartHandler.bind(e,{el:s}));s.addEventListener("touchend",t)}if(i.includes("click")){let t=n.Xt.dataStorage.put(s,`mouseup keyup/preventevent/${e.ns}`,e._eventPreventeventStartHandler.bind(e,{el:s}));s.addEventListener("mouseup",t),s.addEventListener("keyup",t)}}n.Xt.dataStorage.put(s,`active/preventevent/${e.ns}`,e.hasCurrent({el:s}))}}let s=!1;if("unique"===e._mode&&n.Xt.dataStorage.get(document.documentElement,`xtNamespace${e.ns}`).length>1&&(s=!0),!s)for(let s of e.targets){let i=n.Xt.dataStorage.put(s,`${t.on}/oncustom/${e.ns}`,e._eventOnHandler.bind(e,{el:s,force:!0}));s.addEventListener(`on.trigger.${e._componentNs}`,i);let a=n.Xt.dataStorage.put(s,`${t.off}/offcustom/${e.ns}`,e._eventOffHandler.bind(e,{el:s,force:!0}));s.addEventListener(`off.trigger.${e._componentNs}`,a)}if(t.auto&&t.auto.time){let s=n.Xt.dataStorage.put(e.container,`autostart/${e.ns}`,e._eventAutostart.bind(e)),i=n.Xt.dataStorage.put(e.container,`autostop/${e.ns}`,e._eventAutostop.bind(e));if(addEventListener("focus",n.Xt.dataStorage.set(window,`focus/auto/${e.ns}`,s)),addEventListener("blur",n.Xt.dataStorage.set(window,`blur/auto/${e.ns}`,i)),e.container.addEventListener(`autostart.trigger.${e._componentNs}`,s),e.container.addEventListener(`autostop.trigger.${e._componentNs}`,i),t.auto.pause){let s=e.container.querySelectorAll(t.auto.pause);if(s.length)for(let t of(e._destroyElements.push(...s),s)){let s=n.Xt.dataStorage.put(t,`mouseenter focus/auto/${e.ns}`,e._eventAutostop.bind(e));for(let e of["mouseenter","focus"])t.addEventListener(e,s);let i=n.Xt.dataStorage.put(t,`mouseleave blur/auto/${e.ns}`,e._eventAutostart.bind(e));for(let e of["mouseleave","blur"])t.addEventListener(e,i)}}}if(t.hash){for(let s of e.elements)if(s.getAttribute(t.hash)){e._hasHash=!0;break}if(!e._hasHash){for(let s of e.targets)if(s.getAttribute(t.hash)){e._hasHash=!0;break}}}if(e._hasHash&&addEventListener("popstate",n.Xt.dataStorage.put(window,`popstate/${e.ns}`,e._hashChange.bind(e).bind(e,{save:!0}))),t.jump)for(let t of e.targets){let s=n.Xt.dataStorage.put(t,`click/jump/${e.ns}`,e._eventJumpHandler.bind(e).bind(e,{el:t}));t.addEventListener("click",s,!0),e.disabled||t.classList.add("xt-jump")}if(t.navigation&&(e.navs=e.container.querySelectorAll(t.navigation),e.navs.length))for(let t of(e._destroyElements.push(...e.navs),e.navs)){let s=n.Xt.dataStorage.put(t,`click/nav/${e.ns}`,e._eventNavHandler.bind(e).bind(e,{el:t}));t.addEventListener("click",s)}if(t.closeauto&&addEventListener("closeauto.trigger.xt",n.Xt.dataStorage.set(window,`closeauto.trigger.xt/${e.ns}`,e._eventCloseautoHandler.bind(e)),!0),t.openauto&&addEventListener("openauto.trigger.xt",n.Xt.dataStorage.set(window,`openauto.trigger.xt/${e.ns}`,e._eventOpenautoHandler.bind(e)),!0),t.mediaLoaded||t.mediaLoadedReinit){for(let t of e.elements){let s=Array.from(t.querySelectorAll("img"));for(let i of(e._destroyElements.push(...s),s))if(!n.Xt.dataStorage.get(i,`${e.ns}MedialoadedDone`)){if(i.complete)e._eventMedialoadedHandler({img:i,el:t});else{let s=n.Xt.dataStorage.put(i,`load/media/${e.ns}`,e._eventMedialoadedHandler.bind(e).bind(e,{img:i,el:t,deferred:!0}));i.addEventListener("load",s)}}}for(let t of e.targets){let s=Array.from(t.querySelectorAll("img"));for(let i of(e._destroyElements.push(...s),s))if(!n.Xt.dataStorage.get(i,`${e.ns}MedialoadedDone`)){if(i.complete)e._eventMedialoadedHandler({img:i,el:t});else{let s=n.Xt.dataStorage.put(i,`load/media/${e.ns}`,e._eventMedialoadedHandler.bind(e).bind(e,{img:i,el:t,deferred:!0,reinit:!0}));i.addEventListener("load",s)}}}}t.visibleReinit&&!n.Xt.visible({el:e.container})&&(e._observer=new IntersectionObserver((t,s)=>{for(let n of t)n.intersectionRatio>0&&(e._eventVisibleReinit(),s.disconnect(),e._observer=null)},{root:null}),e._observer.observe(e.container))}_eventOnHandler(e,t){var s;let{el:i,force:a=!1}=e,o=this.options;if(a=a||(null==t?void 0:null===(s=t.detail)||void 0===s?void 0:s.force),i=o.groupElements||this.targets.includes(i)?this.getElements({el:i})[0]:i,!a&&o.eventLimit){let e=this._containerElements.querySelectorAll(o.eventLimit);if(this._containerElements.matches(o.eventLimit)||e.length&&n.Xt.contains({els:e,tr:t.target}))return}this._eventOn({el:i,force:a},t)}_eventOffHandler(e,t){var s;let{el:i,force:a=!1}=e,o=this.options;if(a=a||(null==t?void 0:null===(s=t.detail)||void 0===s?void 0:s.force),i=o.groupElements||this.targets.includes(i)?this.getElements({el:i})[0]:i,!a&&o.eventLimit){let e=this._containerElements.querySelectorAll(o.eventLimit);if(this._containerElements.matches(o.eventLimit)||e.length&&n.Xt.contains({els:e,tr:t.target}))return}this._eventOff({el:i,force:a},t)}_eventPreventeventStartHandler(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.Xt.dataStorage.put(e,`active/preventevent/${this.ns}`,this.hasCurrent({el:e}));let t=n.Xt.dataStorage.put(e,`click keypress/preventevent/${this.ns}`,this._eventPreventeventHandler.bind(this,{el:e}));e.addEventListener("click",t),e.addEventListener("keypress",t);let s=n.Xt.dataStorage.put(e,`off/preventevent/${this.ns}`,this._eventPreventeventResetHandler.bind(this,{el:e}));e.addEventListener(`off.${this._componentNs}`,s)}_eventPreventeventEndHandler(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.Xt.dataStorage.get(e,`click/preventevent/${this.ns}`);e.removeEventListener("click",t);let s=n.Xt.dataStorage.get(e,`off/preventevent/${this.ns}`);e.removeEventListener(`off.${this._componentNs}`,s)}_eventPreventeventHandler(e,t){let{el:s}=e,i=n.Xt.dataStorage.get(s,`active/preventevent/${this.ns}`);t.key&&"Enter"!==t.key||(i||n.Xt.dataStorage.get(s,`${this.ns}PreventeventDone`)?(this._eventPreventeventEndHandler({el:s}),n.Xt.dataStorage.remove(s,`${this.ns}PreventeventDone`),n.Xt.dataStorage.remove(s,`active/preventevent/${this.ns}`)):(n.Xt.dataStorage.set(s,`${this.ns}PreventeventDone`,!0),t.preventDefault()))}_eventPreventeventResetHandler(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._eventPreventeventEndHandler({el:e}),n.Xt.dataStorage.remove(e,`${this.ns}PreventeventDone`),n.Xt.dataStorage.remove(e,`active/preventevent/${this.ns}`)}_hashChange(){let{save:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.options,s=0,i=[];if(this.disabled)return{currents:s,arr:i};if(this._hasHash&&!n.Xt.dataStorage.get(this.container,`${this.ns}HashSkip`)){let a=decodeURI(location.hash.split("#")[1]);if(a){let o=(e,s)=>e.getAttribute(t.hash)===s;for(let l of this.elements){let r=!1;for(let t of(e&&(r=o(l,a)),this.getTargets({el:l})))e&&!r&&(r=o(t,a));if(r&&s<t.max){if(s++,i.push(l),n.Xt.dataStorage.set(this.container,`${this.ns}HashSkip`,!0),t.on){let e=t.on.split(" ")[0];l.dispatchEvent(new CustomEvent(e,{detail:{force:!0}}))}else this._eventOn({el:l,force:!0});n.Xt.dataStorage.set(this.container,`${this.ns}HashSkip`,!1)}}}}return{currents:s,arr:i}}_eventJumpHandler(e,t){let{el:s}=e;!this.disabled&&this.targets.includes(s)&&this._eventJump({el:s},t)}_eventNavHandler(e,t){let{el:s}=e;this._eventNav({el:s},t)}_eventCloseautoHandler(e){var t,s;if(!(null==e?void 0:null===(t=e.detail)||void 0===t?void 0:t.container)||(null==e?void 0:null===(s=e.detail)||void 0===s?void 0:s.container.contains(this.container)))for(let t of this._getCurrents())this._eventOff({el:t,force:!0},e)}_eventOpenautoHandler(e){let t;for(let s of Array.from(this.elements).filter(t=>t.contains(e.target))){t=s;break}if(!t)for(let s of Array.from(this.targets).filter(t=>t.contains(e.target))){t=s;break}t&&this._eventOn({el:t},e)}_eventMedialoadedHandler(){let{img:e,el:t,deferred:s=!1,reinit:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this,o=a.options;n.Xt.dataStorage.set(e,`${a.ns}MedialoadedDone`,!0);let l=n.Xt.dataStorage.get(e,`load/media/${a.ns}`);e.removeEventListener("load",l),o.mediaLoadedReinit&&s&&i&&(clearTimeout(n.Xt.dataStorage.get(a.container,`${a.ns}MedialoadedTimeout`)),n.Xt.dataStorage.set(a.container,`${a.ns}MedialoadedTimeout`,setTimeout(()=>{a._eventMediaLoadedReinit()},n.Xt.medialoadedDelay))),o.mediaLoaded&&t.classList.add("xt-medialoaded"),t.dispatchEvent(new CustomEvent(`medialoaded.${a._componentNs}`,{detail:{deferred:s}}))}getElementsGroups(){let e=[];for(let t of this.elements){let s=t.getAttribute("data-xt-group");s&&e.filter(e=>e.getAttribute("data-xt-group")===s).length||e.push(t)}return e}_groupFilter(){let{els:e,attr:t,some:s=!1,same:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.options,a=[];for(let o of e){let e=o.getAttribute("data-xt-group");if(n){let t=o.getAttribute("data-xt-group-same");t&&(e+=i.groupSeparator+t)}if(e===t){a.push(o);continue}if(s){let s=null==t?void 0:t.split(i.groupSeparator).filter(e=>e),n=null==e?void 0:e.split(i.groupSeparator).filter(e=>e);n&&s&&n.some(e=>s.includes(e))&&a.push(o)}}return a}getElements(){let{el:e,same:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.options;if(!this.elements||!this.elements.length||!e)return[];if("unique"===this._mode){let e=[],t=n.Xt.dataStorage.get(document.documentElement,`xtNamespace${this.ns}`);if(t){for(let s of t)e.push(...s.elements);return e}return[]}if("multiple"===this._mode){let n=e.getAttribute("data-xt-group");if(t){let t=e.getAttribute("data-xt-group-same");t&&(n+=s.groupSeparator+t)}let i=!this.elements.includes(e),a=this._groupFilter({els:this.elements,attr:n,some:i,same:t}),o=this._groupFilter({els:this.targets,attr:n,some:i,same:t});return n?a:Array.from(this.elements).includes(e)?[e].filter(e=>e):[a[o.findIndex(t=>t===e)]].filter(e=>e)}}getTargets(){let{el:e,same:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.options;if(!this.targets||!this.targets.length||!e)return[];if("unique"===this._mode)return this.targets;if("multiple"===this._mode){let n=e.getAttribute("data-xt-group");if(t){let t=e.getAttribute("data-xt-group-same");t&&(n+=s.groupSeparator+t)}let i=!this.targets.includes(e),a=this._groupFilter({els:this.elements,attr:n,some:i,same:t}),o=this._groupFilter({els:this.targets,attr:n,some:i,same:t});return n?o:Array.from(this.targets).includes(e)?[e].filter(e=>e):[o[a.findIndex(t=>t===e)]].filter(e=>e)}}_getElementsInner(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.options,s=[];if(t.elementsInner)for(let t of e){let e=n.Xt.dataStorage.get(t,`elementsInner/${this.ns}`);e.length&&(s=s.concat(e))}return s}_getTargetsInner(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.options,s=[];if(t.targetsInner)for(let t of e){let e=n.Xt.dataStorage.get(t,`targetsInner/${this.ns}`);e.length&&(s=s.concat(e))}return s}_getEventParent(){let{el:e,event:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.options;return s.mouseParent&&["mouseenter","mouseleave","mousehover","mouseout"].includes(t)?"string"==typeof s.mouseParent?e.closest(s.mouseParent):e.parentNode:e}_getCurrents(){return n.Xt._currents[this.ns]}_setCurrents(e){n.Xt._currents[this.ns]=e}_addCurrent(){let{el:e,running:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hasCurrent({el:e,running:t})||(t?n.Xt._running:n.Xt._currents)[this.ns].push(e)}_removeCurrent(){let{el:e,running:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t?n.Xt._running:n.Xt._currents;s[this.ns]=s[this.ns].filter(t=>t!==e)}hasCurrent(){let{el:e,same:t=!1,running:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.options.groupElements||this.targets.includes(e)?this.getElements({el:e,same:t}):[e];return(s?n.Xt._running:n.Xt._currents)[this.ns].filter(e=>i.includes(e)).length}_checkOn(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!this.hasCurrent({el:e})}_checkOff(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(this.options.min-this._getCurrents().length>=0)&&this.hasCurrent({el:e})}_checkOnRunning(){let{obj:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.elements.runningOn||!this.hasCurrent({el:e.elements.queueEls[0],running:!0});return e.elements.runningOn=t,t}_checkOffRunning(){let{obj:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.elements.runningOff||this.hasCurrent({el:e.elements.queueEls[0],running:!0});return e.elements.runningOff=t,t}_setIndex(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getIndex({el:e});this._oldIndex=this.index??t,this.index=t}getIndex(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this.getElements({el:e})[0];let t=null;for(let[s,n]of this.getElementsGroups().entries())if(e===n){t=s;break}return t}_setDirection(){null===this.index||this.index===this._oldIndex?this.direction=0:null!==this._inverse?this.direction=this._inverse?-1:1:this.direction=this.index<this._oldIndex?-1:1}_activate(){let{el:e,type:t,skipSame:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this,a=i.options;s||!0===a.classSkip||a.classSkip[t]||(e.checked=!0,e.classList.add(...i._classes),e.classList.remove(...i._classesOut),n.Xt.frameDouble({el:e,func:()=>{e.classList.add(...i._classesIn),e.classList.remove(...i._classesDone)}}),e.classList.remove(...i._classesBefore,...i._classesAfter),i.direction<0?e.classList.add(...i._classesBefore):i.direction>0&&e.classList.add(...i._classesAfter))}_activateDone(){let{el:e,type:t,skipSame:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.options;s||!0===i.classSkip||i.classSkip[t]||(n.Xt.frameDouble({el:e}),e.classList.add(...this._classesIn,...this._classesDone))}_activateHash(){let{obj:e,el:t,type:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this,a=i.options;if(!n.Xt.dataStorage.get(i.container,`${i.ns}HashSkip`)&&i._hasHash&&!i.initial){let o=e.elements.queueEls[0];if("elements"===s&&i.getElements({el:o}).includes(t)||"targets"===s&&i.getTargets({el:o}).includes(t)){let e=t.getAttribute(a.hash);e&&n.Xt.frame({el:window,ns:`${i.ns}Hash`,func:()=>{n.Xt.dataStorage.set(i.container,`${i.ns}HashSkip`,!0),history.pushState({},"",`#${encodeURIComponent(e)}`),n.Xt.dataStorage.set(i.container,`${i.ns}HashSkip`,!1)}})}}}_deactivate(){let{el:e,type:t,skipSame:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this,a=i.options;s||!0===a.classSkip||a.classSkip[t]||(e.checked=!1,e.classList.remove(...i._classes),n.Xt.frameDouble({el:e,func:()=>{e.classList.remove(...i._classesIn,...i._classesDone),e.classList.add(...i._classesOut)}}),e.classList.remove(...i._classesBefore,...i._classesAfter),i.direction<0?e.classList.add(...i._classesBefore):i.direction>0&&e.classList.add(...i._classesAfter))}_deactivateDone(){let{el:e,type:t,skipSame:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.options;s||!0===i.classSkip||i.classSkip[t]||(n.Xt.frameDouble({el:e}),e.classList.remove(...this._classesIn,...this._classesOut))}_deactivateHash(){let{obj:e,el:t,type:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this,a=i.options;if(!n.Xt.dataStorage.get(i.container,`${i.ns}HashSkip`)&&a.hash&&i._hasHash&&!i.initial){let o=e.elements.queueEls[0];if("elements"===s&&i.getElements({el:o}).includes(t)||"targets"===s&&i.getTargets({el:o}).includes(t)){let e=t.getAttribute(a.hash);e&&e===location.hash.split("#")[1]&&n.Xt.frame({el:window,ns:`${i.ns}Hash`,func:()=>{n.Xt.dataStorage.set(i.container,`${i.ns}HashSkip`,!0),history.pushState({},"","#"),n.Xt.dataStorage.set(i.container,`${i.ns}HashSkip`,!1)}})}}}_eventOn(e,t){var s;let{el:n,force:i=!1,focus:a=!1}=e,o=this.options;if(i=i||(null==t?void 0:null===(s=t.detail)||void 0===s?void 0:s.force),this.disabled&&!i)return!1;if(i||this._checkOn({el:n})){this._eventAutostop();let e=o.groupElements||this.targets.includes(n)?this.getElements({el:n,same:!0}):[n];n=e[0];let s=this.getTargets({el:n,same:!0}),l=this._getElementsInner({els:e}),r=this._getTargetsInner({els:s});this._addCurrent({el:n}),this._setIndex({el:n}),this._setDirection();let d=this._eventQueue({elements:e,targets:s,elementsInner:l,targetsInner:r,force:i,e:t}),u=this._getCurrents();if(u.length>o.max){let e=this._eventOff({el:u[0],objFilter:d});!o.queue&&(null==e?void 0:e.obj)&&(d=e.obj)}for(let e in o.queue?this._queueIn.unshift(d):this._queueIn=[d],this._queueIn[0])this._queueStart({actionCurrent:"In",actionOther:"Out",type:e,index:0});return a&&(n=l[0]??n).focus(),!0}return o.off&&o.off.split(" ").includes(null==t?void 0:t.type)&&this._eventOff({el:n},t),!1}_eventOff(){var e;let{el:t,force:s=!1,focus:n=!1,objFilter:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,o=this.options;if(s=s||(null==a?void 0:null===(e=a.detail)||void 0===e?void 0:e.force),this.disabled&&!s)return!1;if(s||this._checkOff({el:t})){let e=o.groupElements||this.targets.includes(t)?this.getElements({el:t,same:!0}):[t];t=e[0],this._removeCurrent({el:t});let l=this.getTargets({el:t,same:!0}),r=this._getElementsInner({els:e}),d=this._getTargetsInner({els:l});this._getCurrents().length||this._eventAutostop();let u=this._eventQueue({elements:e,targets:l,elementsInner:r,targetsInner:d,force:s,e:a});if(o.groupSame&&!o.queue&&i)for(let e in u){let t=u[e];if(t.queueEls){let s=i[e],n=t.queueEls.filter(e=>!s.queueEls.includes(e));s.skipEls=s.queueEls.filter(e=>t.queueEls.includes(e)),t.queueEls=n}}if(o.queue?this._queueOut.unshift(u):this._queueOut=[u],this._queueOut.length>o.max){let e=this._queueIn.shift();this._queueStop({actionCurrent:"In",actionOther:"Out",obj:e});let t=this._queueOut.shift();this._queueStop({actionCurrent:"Out",actionOther:"In",obj:t})}for(let e in this._queueOut[0])this._queueStart({actionCurrent:"Out",actionOther:"In",type:e,index:0});return n&&(t=r[0]??t).focus(),!i||{obj:i}}return!1}_eventQueue(){let{elements:e,targets:t,elementsInner:s,targetsInner:n,force:i,e:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o={};return o.elements={queueEls:e,force:i,e:a},t.length&&(o.targets={queueEls:t}),s.length&&(o.elementsInner={queueEls:s}),n.length&&(o.targetsInner={queueEls:n}),o}_eventAuto(){let e=this.options;!this.disabled&&!this._autoblock&&this._autorunning&&n.Xt.visible({el:this.container})&&(e.auto.inverse?this.goToPrev({amount:e.auto.step,loop:e.auto.loop}):this.goToNext({amount:e.auto.step,loop:e.auto.loop}))}_eventAutostart(){let e=this,t=e.options;if(!e.disabled&&t.auto&&t.auto.time&&n.Xt.autoTimescale&&!e._autoblock&&!e._autorunning&&null!==e.index&&(!e.initial||t.auto.initial)){e._autorunning=!0,clearTimeout(n.Xt.dataStorage.get(e.container,`${e.ns}AutoTimeout`));let s=t.auto.time;if(e.disabled)return;n.Xt.dataStorage.set(e.container,`${e.ns}AutoTimeout`,setTimeout(()=>{e._eventAuto()},s/n.Xt.autoTimescale)),e.container.dispatchEvent(new CustomEvent(`autostart.${e._componentNs}`))}}_eventAutostop(){let e=this.options;e.auto&&e.auto.time&&!this._autoblock&&this._autorunning&&(this._autorunning=!1,clearTimeout(n.Xt.dataStorage.get(this.container,`${this.ns}AutoTimeout`)),this.container.dispatchEvent(new CustomEvent(`autostop.${this._componentNs}`)))}_eventJump(e,t){let{el:s}=e;!(this.disabled||s.classList.contains(...this._classes)||!s.classList.contains("xt-jump"))&&(t.preventDefault(),this._checkOn({el:s})&&this._eventOn({el:s}))}_eventNav(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.disabled)return;let t=parseFloat(e.getAttribute("data-xt-nav"));t<0?this.goToPrev({amount:-t}):this.goToNext({amount:t})}_eventMediaLoadedReinit(){this.reinit()}_eventVisibleReinit(){this.reinit()}_queueStart(){let{actionCurrent:e,actionOther:t,type:s,index:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.options,a=this[`_queue${e}`][n];if(a&&a[s]&&!a[s].done){let n=this[`_queue${t}`],o=n[n.length-1];o&&o[s]&&!o[s].done||(this.initial||!i.queue?a[s].instant=!0:i.queue&&!i.queue[s]&&(a[s].instantType=!0),this._specialClassBody({actionCurrent:e,type:s}),this._queueDelay({actionCurrent:e,actionOther:t,obj:a,type:s}))}}_queueStop(){let{actionCurrent:e,actionOther:t,obj:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let i in s)if(s[i].done)for(let a of s[i].queueEls)n.Xt.frameDouble({el:a,ns:`${this.ns}CollapseHeightFrame`}),n.Xt.frameDouble({el:a,ns:`${this.ns}CollapseWidthFrame`}),clearTimeout(n.Xt.dataStorage.get(a,`${this.ns+i}DelayTimeout`)),clearTimeout(n.Xt.dataStorage.get(a,`${this.ns+i}AnimTimeout`)),this._queueDelayDone({actionCurrent:t,actionOther:e,obj:s,el:a,type:i,skipQueue:!0}),this._queueAnimDone({actionCurrent:t,actionOther:e,obj:s,el:a,type:i,skipQueue:!0})}_queueDelay(){let{actionCurrent:e,actionOther:t,obj:s,type:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this,o=a.options,l=s[i].queueEls;for(let d of l){var r;let u=null===(r=s[i].skipEls)||void 0===r?void 0:r.includes(d),h=!a.initial&&!a.disabled&&n.Xt.delayTime({el:d,duration:o.delay||o[`delay${e}`],actionCurrent:e});h&&"function"==typeof h&&(h=h({current:n.Xt.dataStorage.get(d,`${a.ns+e}Count`)||l.findIndex(e=>e===d),total:(n.Xt.dataStorage.get(d,`${a.ns+e}Tot`)||l.length)-1,el:d,self:a})),clearTimeout(n.Xt.dataStorage.get(d,`${a.ns+i}DelayTimeout`)),clearTimeout(n.Xt.dataStorage.get(d,`${a.ns+i}AnimTimeout`)),h?"raf"===h?n.Xt.frameDouble({el:d,ns:`${a.ns+i}QueueDelayDone`,func:()=>{a._queueDelayDone({actionCurrent:e,actionOther:t,obj:s,el:d,type:i,skipSame:u})}}):n.Xt.dataStorage.set(d,`${a.ns+i}DelayTimeout`,setTimeout(()=>{a._queueDelayDone({actionCurrent:e,actionOther:t,obj:s,el:d,type:i,skipSame:u})},h)):a._queueDelayDone({actionCurrent:e,actionOther:t,obj:s,el:d,type:i,skipSame:u}),s[i].instant&&d===l[l.length-1]&&a._queueDone({actionCurrent:e,actionOther:t,obj:s,type:i})}l.length||a._queueDone({actionCurrent:e,actionOther:t,obj:s,type:i})}_queueDelayDone(){let{actionCurrent:e,actionOther:t,obj:s,el:i,type:a,skipSame:o,skipQueue:l=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this;if("In"===e&&(r._checkOnRunning({obj:s})||s.elements.force)?("elements"===a&&i===s.elements.queueEls[0]&&r._addCurrent({el:i,running:!0}),r._activate({el:i,type:a}),r._activateHash({obj:s,el:i,type:a}),r._specialZindex({actionCurrent:e,obj:s,el:i,type:a}),r._specialAppendto({actionCurrent:e,el:i,type:a}),r._specialClose({actionCurrent:e,el:i,type:a,obj:s}),r.initial?r._specialCollapse({actionCurrent:e,el:i,type:a,reset:!0}):r._specialCollapse({actionCurrent:e,el:i,type:a}),o||"elementsInner"===a||"targetsInner"===a||r.disabled||n.Xt.frame({el:i,ns:`${r.ns}${e}DelayDone`,func:()=>{i.dispatchEvent(new CustomEvent(`on.${r._componentNs}`,{detail:s.elements.e}))}})):"Out"===e&&(r._checkOffRunning({obj:s})||s.elements.force)&&("elements"!==a||i!==s.elements.queueEls[0]||(r._removeCurrent({el:i,running:!0}),r._getCurrents().length||(r.index=null,r._setDirection())),r._deactivate({el:i,type:a}),r._deactivateHash({obj:s,el:i,type:a}),r._specialCollapse({actionCurrent:e,el:i,type:a}),r._specialClose({actionCurrent:e,el:i,type:a,obj:s}),o||"elementsInner"===a||"targetsInner"===a||r.disabled||n.Xt.frame({el:i,ns:`${r.ns}${e}DelayDone`,func:()=>{i.dispatchEvent(new CustomEvent(`off.${r._componentNs}`,{detail:s.elements.e}))}})),!l&&(r.disabled?(n.Xt.frame({el:i,ns:`${r.ns+a}QueueAnim`}),r._queueAnim({actionCurrent:e,actionOther:t,obj:s,el:i,type:a,skipSame:o})):n.Xt.frame({el:i,ns:`${r.ns+a}QueueAnim`,func:()=>{r._queueAnim({actionCurrent:e,actionOther:t,obj:s,el:i,type:a,skipSame:o})}}),!s[a].instant&&s[a].instantType)){let n=s[a].queueEls;i===n[n.length-1]&&r._queueDone({actionCurrent:e,actionOther:t,obj:s,type:a})}}_queueAnim(){let{actionCurrent:e,actionOther:t,obj:s,el:i,type:a,skipSame:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=this,r=l.options,d=s[a].queueEls,u=!l.initial&&!l.disabled&&n.Xt.animTime({el:i,duration:r.duration||r[`duration${e}`],actionCurrent:e});u&&"function"==typeof u&&(u=u({current:n.Xt.dataStorage.get(i,`${l.ns+e}Count`)||d.findIndex(e=>e===i),total:(n.Xt.dataStorage.get(i,`${l.ns+e}Tot`)||d.length)-1,el:i,self:l})),clearTimeout(n.Xt.dataStorage.get(i,`${l.ns+a}AnimTimeout`)),u?"raf"===u?n.Xt.frameDouble({el:i,ns:`${l.ns+a}QueueAnimDone`,func:()=>{l._queueAnimDone({actionCurrent:e,actionOther:t,obj:s,el:i,type:a,skipSame:o})}}):n.Xt.dataStorage.set(i,`${l.ns+a}AnimTimeout`,setTimeout(()=>{l._queueAnimDone({actionCurrent:e,actionOther:t,obj:s,el:i,type:a,skipSame:o})},u)):l._queueAnimDone({actionCurrent:e,actionOther:t,obj:s,el:i,type:a,skipSame:o})}_queueAnimDone(){let{actionCurrent:e,actionOther:t,obj:s,el:i,type:a,skipSame:o,skipQueue:l=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this;if("In"===e){if("elements"===a&&i===s.elements.queueEls[0]&&!r[`_queue${t}`].length)for(let e in s)r._specialZindex({actionCurrent:t,obj:s,type:e});r._activateDone({el:i,type:a}),r._specialCollapse({actionCurrent:e,el:i,type:a,reset:!0}),r._specialScrollto({actionCurrent:e,el:i,type:a,obj:s}),o||"elementsInner"===a||"targetsInner"===a||r.disabled||n.Xt.frame({el:i,ns:`${r.ns}${e}AnimDone`,func:()=>{i.dispatchEvent(new CustomEvent(`ondone.${r._componentNs}`,{detail:s.elements.e}))}})}else if("Out"===e){if("elements"===a&&i===s.elements.queueEls[0]&&!r._getCurrents().length)for(let t in s)r._specialZindex({actionCurrent:e,obj:s,type:t});r._deactivateDone({el:i,type:a}),r._specialAppendto({actionCurrent:e,el:i,type:a}),r._specialCollapse({actionCurrent:e,el:i,type:a,reset:!0}),o||"elementsInner"===a||"targetsInner"===a||r.disabled||n.Xt.frame({el:i,ns:`${r.ns}${e}AnimDone`,func:()=>{i.dispatchEvent(new CustomEvent(`offdone.${r._componentNs}`,{detail:s.elements.e}))}})}if(!l&&!s[a].instant&&!s[a].instantType){let n=s[a].queueEls;i===n[n.length-1]&&r._queueDone({actionCurrent:e,actionOther:t,obj:s,type:a})}}_queueDone(){let{actionCurrent:e,actionOther:t,obj:s,type:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s[n]){s[n].done=!0;let i=0;for(let e in s)s[e].done&&i++;if(i===Object.entries(s).length){for(let n in s)this._queueStart({actionCurrent:t,actionOther:e,type:n,index:this[`_queue${t}`].length-1});this[`_queue${e}`].pop(),this._queueComplete({actionCurrent:e,obj:s})}}}_queueComplete(){let{actionCurrent:e,obj:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this,a=s.options;if("In"===e){if(s.initial&&s.container.dispatchEvent(new CustomEvent(`setup.${s._componentNs}`)),n.Xt.perf({el:s.container,ns:`${s.ns}Init`,func:()=>{if(s.initial){for(let e in s.container.setAttribute(`data-${s.componentName}-init`,""),s.container.dispatchEvent(new CustomEvent(`init.${s._componentNs}`)),s.initial=!1,t)for(let n of t[e].queueEls)n.classList.remove(...s._classesInitial);a.debug&&console.debug(`${s.componentName} init`,s)}s._eventAutostart(),s._inverse=null}}),a.focusLimit&&!s._focusTrap){let e=s.targets.length?s.targets:s.elements;s._focusTrap=i.createFocusTrap(e,a.focusTrap),s._focusTrap.activate()}}else"Out"===e&&a.focusLimit&&s._focusTrap&&(s._focusTrap.deactivate(),s._focusTrap=null)}_specialZindex(){let{actionCurrent:e,obj:t,el:s,type:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.options;if(this.targets.length||"elements"!==n||(n="targets"),i.zIndex&&i.zIndex[n]){if("In"===e)this.zIndex=this.zIndex?this.zIndex:i.zIndex[n].start,this.zIndex=this.zIndex+i.zIndex[n].factor,s.style.zIndex=this.zIndex;else if("Out"===e&&(this.zIndex=i.zIndex[n].start,t[n]))for(let e of t[n].queueEls)e.style.zIndex=this.zIndex}}_specialClassBody(){let{actionCurrent:e,type:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this,i=s.options;i.classBody&&("targets"===t||!s.targets.length&&"elements"===t)&&("In"===e?n.Xt.frame({el:s.container,ns:`${s.ns}ClassBodyFrame`,func:()=>{for(let e of i.classBody.split(" "))n.Xt._classBody.add({c:e,ns:s.ns}),document.documentElement.querySelector("body").classList.add(e)}}):"Out"===e&&n.Xt.frame({el:s.container,ns:`${s.ns}ClassBodyFrame`,func:()=>{for(let e of i.classBody.split(" "))n.Xt._classBody.remove({c:e,ns:s.ns}),n.Xt._classBody.get({c:e}).length||document.documentElement.querySelector("body").classList.remove(e)}}))}_specialAppendto(){let{actionCurrent:e,el:t,type:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.options;if(i.appendTo&&("targets"===s||!this.targets.length&&"elements"===s)){if("In"===e){let e=document.querySelector(i.appendTo);document.querySelector(`[data-xt-origin="${this.ns}"]`)||t.before(n.Xt.node({str:`<div class="xt-ignore hidden" data-xt-origin="${this.ns}"></div>`})),e.append(t)}else if("Out"===e){let e=document.querySelector(`[data-xt-origin="${this.ns}"]`);e?(e.before(t),e.remove()):t.remove()}}}_specialScrollto(){let{actionCurrent:e,obj:t,el:s,type:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this,o=a.options;if(o.scrollto&&"In"===e){let e=e=>{let{el:t}=e;if(!a.initial||o.scrolltoInit){let e=a.initial;n.Xt.ready({state:"complete",func:()=>{requestAnimationFrame(()=>{e&&(n.Xt.scrolltoHashforce=!0),t.dispatchEvent(new CustomEvent("scrollto.trigger.xt.scrollto"))})}})}};if("string"==typeof o.scrollto){if(i===o.scrollto)e({el:s});else if("elements"===i&&s===t.elements.queueEls[0]){let t=a.container.querySelector(o.scrollto);(t=t??document.querySelector(o.scrollto))&&e({el:t})}}else"elements"===i&&s===t.elements.queueEls[0]&&e({el:a.container})}}_specialCollapse(){let{actionCurrent:e,el:t,type:s,reset:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.options;if(a.collapseHeight){if("In"===e){if(a.collapseHeight===s){if(i)t.style.height="inherit",t.style.maxHeight="none",t.classList.add("xt-collapse-reset"),n.Xt.frameDouble({el:t,ns:`${this.ns}CollapseHeightFrame`});else{t.classList.remove("xt-collapse-reset"),t.style.height="auto",t.style.maxHeight="none";let e=t.offsetHeight;t.style.height="",t.style.maxHeight="";let s=t.offsetHeight;s=s===e?0:s,t.style.height=`${s}px`,t.style.maxHeight="none",n.Xt.frameDouble({el:t,ns:`${this.ns}CollapseHeightFrame`,func:()=>{t.style.height=`${e}px`}})}}}else if("Out"===e&&a.collapseHeight===s){if(i)t.style.height="",t.style.maxHeight="",n.Xt.frameDouble({el:t,ns:`${this.ns}CollapseHeightFrame`});else{t.classList.remove("xt-collapse-reset");let e=t.offsetHeight;t.style.height="",t.style.maxHeight="";let s=t.offsetHeight;t.style.height="auto",t.style.maxHeight="none",s=t.offsetHeight===s?0:s,t.style.height=`${e}px`,n.Xt.frameDouble({el:t,ns:`${this.ns}CollapseHeightFrame`,func:()=>{t.style.height=`${s}px`}})}}}if(a.collapseWidth){if("In"===e){if(a.collapseWidth===s){if(i)t.style.width="inherit",t.style.maxWidth="none",t.classList.add("xt-collapse-reset"),n.Xt.frameDouble({el:t,ns:`${this.ns}CollapseWidthFrame`});else{t.classList.remove("xt-collapse-reset"),t.style.width="auto",t.style.maxWidth="none";let e=t.offsetWidth;t.style.width="",t.style.maxWidth="";let s=t.offsetWidth;s=s===e?0:s,t.style.width=`${s}px`,t.style.maxWidth="none",n.Xt.frameDouble({el:t,ns:`${this.ns}CollapseWidthFrame`,func:()=>{t.style.width=`${e}px`}})}}}else if("Out"===e&&a.collapseWidth===s){if(i)t.style.width="",t.style.maxWidth="",n.Xt.frameDouble({el:t,ns:`${this.ns}CollapseWidthFrame`});else{t.classList.remove("xt-collapse-reset");let e=t.offsetWidth;t.style.width="",t.style.maxWidth="";let s=t.offsetWidth;t.style.width="auto",t.style.maxWidth="none",s=t.offsetWidth===s?0:s,t.style.width=`${e}px`,n.Xt.frameDouble({el:t,ns:`${this.ns}CollapseWidthFrame`,func:()=>{t.style.width=`${s}px`}})}}}}_specialClose(){let{actionCurrent:e,el:t,type:s,obj:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.options;if("In"===e){if(a.closeInside&&("elements"===s||"targets"===s)){let e=n.Xt.dataStorage.put(t,`click/close/${this.ns}`,this._eventSpecialcloseinsideHandler.bind(this));requestAnimationFrame(()=>{t.removeEventListener("click",e),t.addEventListener("click",e)})}if(a.closeOutside&&"elements"===s&&t===i.elements.queueEls[0])for(let e of document.querySelectorAll(a.closeOutside)){let t=n.Xt.dataStorage.put(e,`mousedown/close/${this.ns}`,this._eventSpecialcloseoutsideHandler.bind(this));requestAnimationFrame(()=>{e.removeEventListener("mousedown",t),e.addEventListener("mousedown",t)})}if(a.closeDeep&&("targets"===s||!this.targets.length&&"elements"===s))for(let e of t.querySelectorAll(a.closeDeep)){let t=n.Xt.dataStorage.put(e,`click/close/${this.ns}`,this._eventSpecialclosedeepHandler.bind(this));requestAnimationFrame(()=>{e.removeEventListener("click",t),e.addEventListener("click",t)});let s=n.Xt.dataStorage.put(e,`keydown/close/${this.ns}`,this._eventSpecialclosedeepKeydownHandler.bind(this).bind(this,{closeElement:e}));requestAnimationFrame(()=>{e.addEventListener("keydown",s),e.setAttribute("tabindex","0"),e.setAttribute("role","button")})}}else if("Out"===e){if(a.closeInside&&("elements"===s||"targets"===s)){let e=n.Xt.dataStorage.get(t,`click/close/${this.ns}`);t.removeEventListener("click",e)}if(a.closeOutside&&"elements"===s&&t===i.elements.queueEls[0])for(let e of document.querySelectorAll(a.closeOutside)){let t=n.Xt.dataStorage.get(e,`mousedown/close/${this.ns}`);e.removeEventListener("mousedown",t)}if(a.closeDeep&&("targets"===s||!this.targets.length&&"elements"===s))for(let e of t.querySelectorAll(a.closeDeep)){let t=n.Xt.dataStorage.get(e,`click/close/${this.ns}`);e.removeEventListener("click",t);let s=n.Xt.dataStorage.get(e,`keydown/close/${this.ns}`);e.removeEventListener("keydown",s),e.removeAttribute("tabindex"),e.removeAttribute("role")}}}_eventSpecialcloseinsideHandler(e){let t=this.options;if(e.target.matches(t.closeInside))for(let e of this._getCurrents())this._eventOff({el:e,force:!0})}_eventSpecialcloseoutsideHandler(e){if(!n.Xt.contains({els:[...this.elements,...this.targets],tr:e.target}))for(let e of this._getCurrents())this._eventOff({el:e,force:!0})}_eventSpecialclosedeepHandler(e){if(n.Xt.contains({els:[...this.elements,...this.targets],tr:e.target}))for(let e of this._getCurrents())this._eventOff({el:e,force:!0})}_eventSpecialclosedeepKeydownHandler(e,t){let{closeElement:s}=e,n=t.key;("Enter"===n||" "===n)&&(t.preventDefault(),s.dispatchEvent(new CustomEvent("click")))}getNextIndex(){let{index:e=!1,amount:t=1,loop:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!1!==e?e+=t:e=null!==this.index?this.index+t:0,this.getNumIndex({index:e,loop:s})}getNext(){let{amount:e=1,loop:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.getNextIndex({amount:e,loop:t});return this.getElementsGroups()[s]}goToNext(){let{amount:e=1,force:t=!1,loop:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._inverse=!1;let n=this.getNextIndex({amount:e,loop:s});return this.goToNum({index:n,force:t,loop:s})}getPrevIndex(){let{index:e=!1,amount:t=1,loop:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!1!==e?e-=t:e=null!==this.index?this.index-t:this.getElementsGroups().length-1,this.getNumIndex({index:e,loop:s})}getPrev(){let{amount:e=1,loop:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.getPrevIndex({amount:e,loop:t});return this.getElementsGroups()[s]}goToPrev(){let{amount:e=1,force:t=!1,loop:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._inverse=!0;let n=this.getPrevIndex({amount:e,loop:s});return this.goToNum({index:n,force:t,loop:s})}getNumIndex(){let{index:e,loop:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.options,n=this.getElementsGroups().length-1;return 0===n?e=null:e>n?e=t||null===t&&(s.loop||this._wrap)?(e=e-n-1)>n?n:e:null:e<0&&(e=t||null==t&&(s.loop||this._wrap)?(e=e+n+1)<0?0:e:null),e}getNum(){let{index:e=1,loop:t=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.getNumIndex({index:e,loop:t});return this.getElementsGroups()[s]}goToNum(){let{index:e,force:t=!1,loop:s=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getNum({index:e,loop:s});return n&&this._eventOn({el:n,force:t}),n}enable(){if(this.disabled){for(let e of(this.disabled=!1,this.container.removeAttribute(`data-${this.componentName}-disabled`),this.elements))e.removeAttribute(`data-${this.componentName}-disabled`);for(let e of this.targets)e.removeAttribute(`data-${this.componentName}-disabled`);this.container.dispatchEvent(new CustomEvent(`status.${this._componentNs}`))}}disable(){let{skipEvent:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,s=t.options;if(!t.disabled){if(t.disabled=!0,s.disableDeactivate)for(let e of t.elements.filter(e=>t.hasCurrent({el:e})))t._eventOff({el:e,force:!0});for(let e of(t.container.setAttribute(`data-${t.componentName}-disabled`,""),t.elements))e.setAttribute(`data-${t.componentName}-disabled`,"");for(let e of t.targets)e.setAttribute(`data-${t.componentName}-disabled`,"");if(s.jump)for(let e of t.targets)e.classList.remove("xt-jump");t._observer&&(t._observer.disconnect(),t._observer=null),clearTimeout(n.Xt.dataStorage.get(t.container,`${t.ns}AutoTimeout`)),e||t.container.dispatchEvent(new CustomEvent(`status.${t._componentNs}`))}}_initA11y(){if(this.options.a11y){let e=this.elements,t=this.targets;this.targets.length||(e=[],t=this.elements),this._hasContainer=!("unique"===this._mode||this.elements.includes(this.container)),this._initA11yRole({els:e,trs:t}),this._initA11yId({els:e,trs:t}),this._initA11ySetup(),this._initA11yAuto(),this._initA11yChange(),this._initA11yStatus({els:e}),this._initA11yKeyboard({els:this.elements})}}_initA11yRole(){let{els:e,trs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.options;if(s.a11y.role){let n=!1;if(s.a11y.vertical&&this._hasContainer&&this.container.setAttribute("aria-orientation","vertical"),"popup"===s.a11y.role)for(let t of e)t.setAttribute("aria-haspopup",!0);else if("dialog"===s.a11y.role){for(let t of e)t.setAttribute("aria-haspopup","dialog");for(let e of t)e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true")}else if("tooltip"===s.a11y.role)for(let e of t)e.setAttribute("role","tooltip");else if("carousel"===s.a11y.role&&this._hasContainer)for(let e of(this.container.setAttribute("role","group"),this.container.setAttribute("aria-roledescription","carousel"),t))e.setAttribute("role","group"),e.setAttribute("aria-roledescription","slide");else if("tablist"===s.a11y.role&&this._hasContainer&&this.targets.length){for(let t of(n=!0,this.container.setAttribute("role","tablist"),e))t.setAttribute("role","tab");for(let e of t)e.setAttribute("role","tabpanel")}else if("menu"===s.a11y.role&&this._hasContainer&&this.targets.length){for(let t of(this.container.setAttribute("role","menu"),e))t.setAttribute("role","menuitem");for(let e of t)e.setAttribute("role","menu")}else if("listbox"===s.a11y.role&&this._hasContainer&&this.targets.length)for(let t of(n=!0,this.container.setAttribute("role","listbox"),e))t.setAttribute("role","option");n&&s.max>1&&this.container.setAttribute("aria-multiselectable","true")}}_initA11yId(){let{els:e,trs:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.options;if(this.targets.length){if(s.a11y.labelElements||s.a11y.controls)for(let e of t)e.getAttribute("id")||e.setAttribute("id",n.Xt.uniqueId());if(s.a11y.labelTargets)for(let t of e)t.getAttribute("id")||t.setAttribute("id",n.Xt.uniqueId())}}_initA11ySetup(){let e=this.options;if(this.targets.length){if(e.a11y.labelElements||e.a11y.controls)for(let t of this.elements){let s=this.getTargets({el:t}),n="";for(let e of s)n+=`${e.getAttribute("id")} `;e.a11y.labelElements&&(t.setAttribute("aria-labelledby",n.trim()),t.removeAttribute("aria-label")),e.a11y.controls&&t.setAttribute("aria-controls",n.trim())}if(e.a11y.labelTargets)for(let e of this.targets){let t=this.getElements({el:e}),s="";for(let e of t)s+=`${e.getAttribute("id")} `;e.setAttribute("aria-labelledby",s.trim()),e.removeAttribute("aria-label")}}}_initA11yChange(){let e=this.options;if(e.a11y.selected||e.a11y.expanded){if(e.a11y.expanded)for(let e of this.targets)e.setAttribute("aria-expanded","false");for(let t of this.elements){e.a11y.selected&&this._hasContainer&&this.targets.length&&t.setAttribute("aria-selected","false");let s=n.Xt.dataStorage.put(t,`on.${this._componentNs}/ariaselected/${this.ns}`,this._eventA11yChangeOn.bind(this).bind(this,{el:t}));t.addEventListener(`on.${this._componentNs}`,s);let i=n.Xt.dataStorage.put(t,`off.${this._componentNs}/ariaselected/${this.ns}`,this._eventA11yChangeOff.bind(this).bind(this,{el:t}));t.addEventListener(`off.${this._componentNs}`,i)}}}_eventA11yChangeOn(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.options;if(t.a11y.expanded)for(let t of this.getTargets({el:e}))t.setAttribute("aria-expanded","true");t.a11y.selected&&this._hasContainer&&this.targets.length&&e.setAttribute("aria-selected","true")}_eventA11yChangeOff(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.options;if(t.a11y.expanded)for(let t of this.getTargets({el:e}))t.setAttribute("aria-expanded","false");t.a11y.selected&&this._hasContainer&&this.targets.length&&e.setAttribute("aria-selected","false")}_initA11yAuto(){let e=this.options;if(e.auto&&e.auto.time&&e.a11y.live){let e=this.container;e.setAttribute("aria-live","polite");let t=n.Xt.dataStorage.put(e,`autostart.${this._componentNs}/arialive/${this.ns}`,this._eventA11yAutostart.bind(this).bind(this,{container:e}));e.addEventListener(`autostart.${this._componentNs}`,t);let s=n.Xt.dataStorage.put(e,`autostop.${this._componentNs}/arialive/${this.ns}`,this._eventA11yAutostop.bind(this).bind(this,{container:e}));e.addEventListener(`autostop.${this._componentNs}`,s)}}_eventA11yAutostart(){let{container:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setAttribute("aria-live","off")}_eventA11yAutostop(){let{container:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setAttribute("aria-live","polite")}_initA11yStatus(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.options.a11y.disabled){let t=this.container,s=n.Xt.dataStorage.put(t,`status.${this._componentNs}/ariastatus/${this.ns}`,this._eventA11yStatus.bind(this).bind(this,{els:e}));t.addEventListener(`status.${this._componentNs}`,s)}}_eventA11yStatus(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t of e)this.disabled?t.setAttribute("aria-disabled","true"):t.removeAttribute("aria-disabled")}_initA11yKeyboard(){let{els:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.options.a11y.keyboard)for(let t of e){let e=n.Xt.dataStorage.put(t,`on.${this._componentNs}/ariakeyboard/${this.ns}`,this._eventA11yOn.bind(this).bind(this,{el:t}));t.addEventListener(`on.${this._componentNs}`,e);let s=n.Xt.dataStorage.put(t,`off.${this._componentNs}/ariakeyboard/${this.ns}`,this._eventA11yOff.bind(this).bind(this,{el:t}));t.addEventListener(`off.${this._componentNs}`,s)}}_eventA11yOn(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.options,s=n.Xt.dataStorage.put(e,`keydown/ariakeyboard/${this.ns}`,this._eventA11yKeydown.bind(this));if(e.addEventListener("keydown",s,{passive:!1}),"popup"===t.a11y.role||"dialog"===t.a11y.role||t.a11y.items){let t=n.Xt.dataStorage.put(document,`keydown/ariakeyboard/document/${this.ns}`,this._eventA11yDocumentKeydown.bind(this).bind(this,{el:e}));document.removeEventListener("keydown",t),document.addEventListener("keydown",t)}}_eventA11yOff(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.Xt.dataStorage.get(e,`keydown/ariakeyboard/${this.ns}`);e.removeEventListener("keydown",t);let s=n.Xt.dataStorage.get(e,`keydown/ariakeyboard/document/${this.ns}`);document.removeEventListener("keydown",s)}_eventA11yKeydown(e){let t;let s=this.options;if(this.disabled)return;let n=e.key,i=s.a11y.vertical?"ArrowUp":"ArrowLeft",a=s.a11y.vertical?"ArrowDown":"ArrowRight";if(s.a11y.vertical,n===i?t=this.getPrev():n===a&&(t=this.getNext()),t){this._eventOn({el:t,focus:!0}),e.preventDefault();return}}_eventA11yDocumentKeydown(){let{el:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,s=this,i=s.options;if(s.disabled)return;let a=t.key,o=i.a11y.vertical?"ArrowLeft":"ArrowUp",l=i.a11y.vertical?"ArrowRight":"ArrowDown";if("Escape"===a&&("popup"===i.a11y.role||"dialog"===i.a11y.role)){s._eventOff({el:e,focus:!0});return}if(i.a11y.items){let e;let r=[];for(let e of s.targets.filter(e=>s.hasCurrent({el:e})))r.push(...e.querySelectorAll(i.a11y.items));if(r.length){let i=r.indexOf(document.activeElement);if(a===o){if(-1===i)e=r[r.length-1];else{let t=(i-1+r.length)%r.length;e=r[t]}t.preventDefault()}else if(a===l){if(-1===i)e=r[0];else{let t=(i+1)%r.length;e=r[t]}t.preventDefault()}else{s._search=s._search+t.key.toLowerCase();let i=r.filter(e=>{var t;return null===(t=e.innerText)||void 0===t?void 0:t.toLowerCase().startsWith(s._search)});i.length&&(e=i[0]),clearTimeout(n.Xt.dataStorage.get(document,`${s.ns}SearchTimeout`)),n.Xt.dataStorage.set(document,`${s.ns}SearchTimeout`,setTimeout(()=>{s._search=""},500))}if(e){e.focus();return}}}}reinit(){let{save:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(t.options.disableDeactivate)for(let e of t.targets.filter(e=>t.hasCurrent({el:e})))t._specialAppendto({actionCurrent:"Out",el:e,type:"targets"});t._initLogic({save:e})}restart(){this._initStart(),this.container.dispatchEvent(new CustomEvent(`restart.${this._componentNs}`))}_addNamespace(){if("unique"===this._mode){let e=n.Xt.dataStorage.get(document.documentElement,`xtNamespace${this.ns}`)??[];e.includes(this)||(e.push(this),n.Xt.dataStorage.set(document.documentElement,`xtNamespace${this.ns}`,e))}}_removeNamespace(){let e=this;if("unique"===e._mode){let t=n.Xt.dataStorage.get(document.documentElement,`xtNamespace${e.ns}`);t&&(t=t.filter(t=>t!==e),n.Xt.dataStorage.set(document.documentElement,`xtNamespace${e.ns}`,t))}}_removeEvents(){for(let e of this._destroyElements){let t=n.Xt.dataStorage.getAll(e);if(t){for(let[s]of t)if(s&&s.endsWith(this.ns)){let t=n.Xt.dataStorage.get(e,s);if("function"==typeof t){for(let n of s.split("/")[0].split(" "))e.removeEventListener(n,t),e.removeEventListener(n,t,!0);n.Xt.dataStorage.remove(e,s)}}}}}destroy(){let{weak:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.disable({skipEvent:!0}),n.Xt._removeMatches({self:this,optionsInitial:this._optionsInitial}),this._removeEvents(),this._removeNamespace(),this._destroyElements=[],e||(this.container.removeAttribute(`data-${this.componentName}-init`),n.Xt._remove({name:this.componentName,el:this.container}),this.container.dispatchEvent(new CustomEvent(`destroy.${this._componentNs}`)),delete this)}}}}]);