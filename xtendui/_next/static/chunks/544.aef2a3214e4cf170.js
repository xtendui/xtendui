"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{95544:(t,e,i)=>{i.r(e),i.d(e,{GroupnumberInit:()=>s});var n=i(88300);class s{_init(){this._initVars(),this._initLogic()}_initVars(){this._optionsDefault=n.Xt.merge([this.constructor.optionsDefault,n.Xt.options[this.componentName]]),this._optionsInitial=this.options=n.Xt.merge([this._optionsDefault,this._optionsCustom])}_initLogic(){var t,e;let i=this,s=i.options;for(let t of(i.ns=i.ns??n.Xt.uniqueId(),i.enable(),n.Xt._initMatches({self:i,optionsInitial:i._optionsInitial}),i.initial=!0,i.inputs=i.container.querySelectorAll(s.inputs),i.steps=i.container.querySelectorAll(s.steps),i.inputs))n.Xt.dataStorage.set(t,`voidable/${i.ns}`,""===t.value);let a=(null==(t=s.events)?void 0:t.steps)?s.events.steps.split(" "):[];if(a.length)for(let t of i.steps){let e=n.Xt.dataStorage.put(t,`${s.events.steps}/${i.ns}`,i._eventChange.bind(i,{button:t}));for(let i of a)t.addEventListener(i,e)}let o=(null==(e=s.events)?void 0:e.input)?s.events.input.split(" "):[];if(o.length)for(let t of i.inputs){let e=n.Xt.dataStorage.put(t,`${s.events.input}/${i.ns}`,i._eventChange.bind(i,{}));for(let i of o)t.addEventListener(i,e)}i._initA11y(),i._initStart(),i.container.dispatchEvent(new CustomEvent(`setup.${i._componentNs}`)),n.Xt.frameDouble({el:i.container,ns:`${i.ns}Init`,func:()=>{i.container.setAttribute(`data-${i.componentName}-init`,""),i.container.dispatchEvent(new CustomEvent(`init.${i._componentNs}`)),i.initial=!1,s.debug&&console.debug(`${i.componentName} init`,i)}}),i.options.disabled&&i.disable()}_initStart(){this.disabled||this._eventChange.bind(this)()}_eventChange(){var t;let{button:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,s=this.options;if(!this.disabled&&!(null==i||null==(t=i.detail)?void 0:t.skip)){for(let t of(i&&(i.preventDefault(),i.stopImmediatePropagation()),this.inputs)){let i=t.getAttribute("step"),n=null==e?void 0:e.getAttribute("data-xt-step"),s=i&&""!==i?parseFloat(i)*Math.sign(parseFloat(n)):parseFloat(n)??1,a=parseFloat(t.value);a=isNaN(a)?0:a,s&&(a+=s,a=parseFloat(a.toFixed(this._countDecimals({num:s})))),this._validate({val:a,input:t}),this.initial||this._initA11yLive({input:t})}if(s.limit)for(let t of this.steps)n.Xt.dataStorage.get(t,`${this.ns}ButtonDisabled`)?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"),n.Xt.dataStorage.remove(t,`${this.ns}ButtonDisabled`)}}_validate(){let{val:t,input:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.options,s=e.getAttribute("step"),a=s&&""!==s?parseFloat(s):null;if(i.validate&&(t=i.validate({val:t,step:a})),i.limit){let s=n.Xt.dataStorage.get(e,`voidable/${this.ns}`),a=e.getAttribute("min"),o=e.getAttribute("max"),l=a&&""!==a?parseFloat(a):i.min,r=o&&""!==o?parseFloat(o):i.max;for(let e of this.steps){let i,a,o=e.getAttribute("data-xt-step");s&&(0===t&&(t=""),l>=0&&(i=!0,t<l&&(t="")),r<=0&&(a=!0,t>r&&(t=""))),o<0?(t<l||!i&&t===l||i&&""===t)&&(t=""!==t?l:t,n.Xt.dataStorage.set(e,`${this.ns}ButtonDisabled`,!0)):o>0&&(t>r||!a&&t===r||a&&""===t)&&(t=""!==t?r:t,n.Xt.dataStorage.set(e,`${this.ns}ButtonDisabled`,!0))}}e.value=t,this.initial||(e.dispatchEvent(new Event("input",{detail:{skip:!0}})),e.dispatchEvent(new CustomEvent("change",{detail:{skip:!0}})))}enable(){this.disabled&&(this.disabled=!1,this.container.dispatchEvent(new CustomEvent(`status.${this._componentNs}`)))}disable(){let{skipEvent:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.disabled&&(this.disabled=!0,t||this.container.dispatchEvent(new CustomEvent(`status.${this._componentNs}`)))}_initA11y(){this.options.a11y&&(this._initA11yId(),this._initA11ySetup())}_initA11yId(){if(this.options.a11y.controls)for(let t of this.inputs)t.getAttribute("id")||t.setAttribute("id",n.Xt.uniqueId())}_initA11ySetup(){if(this.options.a11y.controls){let t="";for(let e of this.inputs)t+=`${e.getAttribute("id")} `;for(let e of this.steps)e.setAttribute("aria-controls",t.trim())}}_initA11yLive(t){var e,i;let{input:s}=t,a=this,o=a.options;(null==(e=o.a11y)?void 0:e.live)&&(null==(i=a.container.querySelector("[aria-live]"))||i.remove(),clearTimeout(a.container.dataset.liveTimeout),a.container.dataset.liveTimeout=setTimeout(()=>{let t=a.container.appendChild(n.Xt.node({str:`<span class="sr-only" aria-live="${o.a11y.live}" aria-atomic="true"></span>`}));a.container.dataset.liveTimeout=setTimeout(()=>{let e=s.getAttribute("aria-label")??"";e?t.innerHTML=`${e} ${s.value}`:t.innerHTML=s.value},500)},500))}_countDecimals(){let{num:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Math.floor(t)===t?0:t.toString().split(".")[1].length||0}reinit(){this._initLogic()}destroy(){var t,e;let i=this.options,s=(null==(t=i.events)?void 0:t.steps)?i.events.steps.split(" "):[];if(s.length)for(let t of this.steps){let e=n.Xt.dataStorage.get(t,`${i.events.steps}/${this.ns}`);for(let i of s)t.removeEventListener(i,e)}let a=(null==(e=i.events)?void 0:e.input)?i.events.input.split(" "):[];if(a.length)for(let t of this.inputs){let e=n.Xt.dataStorage.get(t,`${i.events.input}/${this.ns}`);for(let i of a)t.removeEventListener(i,e)}this.container.removeAttribute(`data-${this.componentName}-init`),n.Xt._remove({name:this.componentName,el:this.container}),this.container.dispatchEvent(new CustomEvent(`destroy.${this._componentNs}`)),delete this}}}}]);